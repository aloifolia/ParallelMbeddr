package TasksAndSyncs.generator.template.main;

/*Generated by MPS */

import jetbrains.mps.generator.runtime.Generated;
import jetbrains.mps.smodel.IOperationContext;
import jetbrains.mps.generator.template.BaseMappingRuleContext;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import jetbrains.mps.typesystem.inference.TypeChecker;
import TasksAndSyncs.generator.util.Analyzer;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import jetbrains.mps.internal.collections.runtime.IWhereFilter;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.generator.template.PropertyMacroContext;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SPropertyOperations;
import jetbrains.mps.generator.template.ReferenceMacroContext;
import TasksAndSyncs.generator.util.NameGenerator;
import jetbrains.mps.generator.template.IfMacroContext;
import jetbrains.mps.generator.template.SourceSubstituteMacroNodeContext;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SConceptOperations;
import jetbrains.mps.baseLanguage.closures.runtime.Wrappers;
import jetbrains.mps.baseLanguage.closures.runtime._FunctionTypes;
import jetbrains.mps.generator.template.SourceSubstituteMacroNodesContext;
import jetbrains.mps.internal.collections.runtime.ISelector;
import jetbrains.mps.generator.template.WeavingMappingRuleContext;
import jetbrains.mps.generator.template.MappingScriptContext;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SModelOperations;
import TasksAndSyncs.generator.util.TaskDefinitionBuilder;
import java.util.List;
import TasksAndSyncs.generator.util.Pair;
import java.util.ArrayList;
import TasksAndSyncs.generator.util.SyncDefinitionBuilder;
import jetbrains.mps.internal.collections.runtime.IVisitor;
import jetbrains.mps.smodel.behaviour.BehaviorReflection;
import jetbrains.mps.internal.collections.runtime.Sequence;
import java.util.Map;
import jetbrains.mps.internal.collections.runtime.MapSequence;
import java.util.HashMap;
import TasksAndSyncs.generator.util.ImplementationModuleBuilder;
import jetbrains.mps.generator.template.TemplateQueryContextWithMacro;
import com.mbeddr.core.udt.behavior.SUDeclaration_Behavior;

@Generated
public class QueriesGenerated {
  public static boolean baseMappingRule_Condition_961131662868723683(final IOperationContext operationContext, final BaseMappingRuleContext _context) {
    return !(SNodeOperations.isInstanceOf(SNodeOperations.getParent(_context.getNode()), "TasksAndSyncs.structure.FutureContainer")) && !(SNodeOperations.isInstanceOf(SLinkOperations.getTarget(SNodeOperations.cast(TypeChecker.getInstance().getTypeOf(_context.getNode()), "TasksAndSyncs.structure.TaskType"), "returnType", true), "com.mbeddr.core.expressions.structure.VoidType"));
  }

  public static boolean baseMappingRule_Condition_482600553440859534(final IOperationContext operationContext, final BaseMappingRuleContext _context) {
    return !(SNodeOperations.isInstanceOf(SNodeOperations.getParent(_context.getNode()), "TasksAndSyncs.structure.FutureContainer")) && SNodeOperations.isInstanceOf(SLinkOperations.getTarget(SNodeOperations.cast(TypeChecker.getInstance().getTypeOf(_context.getNode()), "TasksAndSyncs.structure.TaskType"), "returnType", true), "com.mbeddr.core.expressions.structure.VoidType");
  }

  public static boolean baseMappingRule_Condition_6480032978532151858(final IOperationContext operationContext, final BaseMappingRuleContext _context) {
    return false;
  }

  public static boolean baseMappingRule_Condition_6480032978533298720(final IOperationContext operationContext, final BaseMappingRuleContext _context) {
    return true;
  }

  public static boolean baseMappingRule_Condition_7518664430154489080(final IOperationContext operationContext, final BaseMappingRuleContext _context) {
    return !(Analyzer.isLValue(SLinkOperations.getTarget(_context.getNode(), "future", true)));
  }

  public static boolean baseMappingRule_Condition_482600553443548619(final IOperationContext operationContext, final BaseMappingRuleContext _context) {
    return Analyzer.isLValue(SLinkOperations.getTarget(_context.getNode(), "future", true));
  }

  public static boolean baseMappingRule_Condition_3348893923574157399(final IOperationContext operationContext, final BaseMappingRuleContext _context) {
    return SNodeOperations.isInstanceOf(SLinkOperations.getTarget(_context.getNode(), "target", true), "TasksAndSyncs.structure.SharedGet");
  }

  public static boolean baseMappingRule_Condition_3348893923573330646(final IOperationContext operationContext, final BaseMappingRuleContext _context) {
    return SNodeOperations.isInstanceOf(SLinkOperations.getTarget(_context.getNode(), "target", true), "TasksAndSyncs.structure.SharedSet");
  }

  public static boolean baseMappingRule_Condition_5853110027219890125(final IOperationContext operationContext, final BaseMappingRuleContext _context) {
    return ListSequence.fromList(SLinkOperations.getTargets(_context.getNode(), "ressources", true)).any(new IWhereFilter<SNode>() {
      public boolean accept(SNode it) {
        return SNodeOperations.isInstanceOf(it, "TasksAndSyncs.structure.SyncRessourceNamed");
      }
    }) && ListSequence.fromList(SNodeOperations.getDescendants(SLinkOperations.getTarget(_context.getNode(), "statements", true), "TasksAndSyncs.structure.SyncRessourceRef", false, new String[]{})).isEmpty();
  }

  public static boolean baseMappingRule_Condition_5853110027234386164(final IOperationContext operationContext, final BaseMappingRuleContext _context) {
    return ListSequence.fromList(SLinkOperations.getTargets(_context.getNode(), "ressources", true)).any(new IWhereFilter<SNode>() {
      public boolean accept(SNode it) {
        return SNodeOperations.isInstanceOf(it, "TasksAndSyncs.structure.SyncRessourceNamed");
      }
    }) && ListSequence.fromList(SNodeOperations.getDescendants(SLinkOperations.getTarget(_context.getNode(), "statements", true), "TasksAndSyncs.structure.SyncRessourceRef", false, new String[]{})).isEmpty();
  }

  public static Object propertyMacro_GetPropertyValue_482600553440333803(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return _context.createUniqueName(_context.getTemplateValue(), null);
  }

  public static Object propertyMacro_GetPropertyValue_7288607883539033394(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return _context.createUniqueName(_context.getTemplateValue(), null);
  }

  public static Object propertyMacro_GetPropertyValue_6480032978533298609(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return _context.createUniqueName(_context.getTemplateValue(), null);
  }

  public static Object propertyMacro_GetPropertyValue_6480032978533298713(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return _context.createUniqueName(_context.getTemplateValue(), null);
  }

  public static Object propertyMacro_GetPropertyValue_5853110027219942568(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return SPropertyOperations.getString(SNodeOperations.cast(_context.getNode(), "TasksAndSyncs.structure.SyncRessourceNamed"), "name");
  }

  public static Object propertyMacro_GetPropertyValue_5853110027234446691(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return SPropertyOperations.getString(SNodeOperations.cast(_context.getNode(), "TasksAndSyncs.structure.SyncRessourceNamed"), "name");
  }

  public static Object propertyMacro_GetPropertyValue_5853110027234482323(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return SPropertyOperations.getString(SNodeOperations.cast(_context.getNode(), "TasksAndSyncs.structure.SyncRessourceNamed"), "name");
  }

  public static Object propertyMacro_GetPropertyValue_5853110027223158225(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return SPropertyOperations.getString(SLinkOperations.getTarget(_context.getNode(), "syncRessource", false), "name");
  }

  public static Object propertyMacro_GetPropertyValue_4644263955273508749(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return _context.createUniqueName(_context.getTemplateValue(), null);
  }

  public static Object propertyMacro_GetPropertyValue_4644263955273722005(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return SPropertyOperations.getString(_context.getNode(), "name");
  }

  public static Object propertyMacro_GetPropertyValue_4644263955274589810(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return _context.createUniqueName(_context.getTemplateValue(), null);
  }

  public static Object propertyMacro_GetPropertyValue_482600553440749847(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return _context.createUniqueName(_context.getTemplateValue(), null);
  }

  public static Object referenceMacro_GetReferent_4644263955272622644(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    if (SNodeOperations.isInstanceOf(SLinkOperations.getTarget(_context.getNode(), "returnType", true), "com.mbeddr.core.expressions.structure.VoidType")) {
      return NameGenerator.getVoidFutureStructName();
    } else {
      return NameGenerator.getFutureStructName();
    }
  }

  public static Object referenceMacro_GetReferent_482600553440333795(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return _context.getOutputNodeByInputNodeAndMappingLabel(_context.getNode(), "argsStruct");
  }

  public static Object referenceMacro_GetReferent_482600553440393801(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return _context.getOutputNodeByInputNodeAndMappingLabel(_context.getNode(), "argsStruct");
  }

  public static Object referenceMacro_GetReferent_482600553440333852(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return _context.getOutputNodeByInputNodeAndMappingLabel(_context.getNode(), "argsStruct");
  }

  public static Object referenceMacro_GetReferent_8376727689346755584(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return SPropertyOperations.getString(SLinkOperations.getTarget(_context.getNode(), "var", false), "name");
  }

  public static Object referenceMacro_GetReferent_8376727689346755595(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return SLinkOperations.getTarget(_context.getNode(), "var", false);
  }

  public static Object referenceMacro_GetReferent_6079605392881230870(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return _context.getOutputNodeByInputNodeAndMappingLabel(_context.getNode(), "funDecl");
  }

  public static Object referenceMacro_GetReferent_5514347295283988677(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return NameGenerator.getTaskStructName();
  }

  public static Object referenceMacro_GetReferent_3074299910028000429(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return NameGenerator.getTaskStructName();
  }

  public static Object referenceMacro_GetReferent_6843270485069604649(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return NameGenerator.getTaskStructName();
  }

  public static Object referenceMacro_GetReferent_6480032978533298601(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return _context.getOutputNodeByInputNodeAndMappingLabel(_context.getNode(), "argsStruct");
  }

  public static Object referenceMacro_GetReferent_6480032978533298622(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return _context.getOutputNodeByInputNodeAndMappingLabel(_context.getNode(), "argsStruct");
  }

  public static Object referenceMacro_GetReferent_6480032978533298634(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return _context.getOutputNodeByInputNodeAndMappingLabel(_context.getNode(), "argsStruct");
  }

  public static Object referenceMacro_GetReferent_6480032978533298646(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return SPropertyOperations.getString(SLinkOperations.getTarget(_context.getNode(), "var", false), "name");
  }

  public static Object referenceMacro_GetReferent_6480032978533298657(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return SLinkOperations.getTarget(_context.getNode(), "var", false);
  }

  public static Object referenceMacro_GetReferent_6480032978533298683(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return _context.getOutputNodeByInputNodeAndMappingLabel(_context.getNode(), "funDecl");
  }

  public static Object referenceMacro_GetReferent_6480032978533298692(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return NameGenerator.getTaskStructName();
  }

  public static Object referenceMacro_GetReferent_6480032978533298699(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return NameGenerator.getTaskStructName();
  }

  public static Object referenceMacro_GetReferent_6480032978533298708(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return NameGenerator.getTaskStructName();
  }

  public static Object referenceMacro_GetReferent_4390787788473100423(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    if (SNodeOperations.isInstanceOf(SLinkOperations.getTarget(SNodeOperations.cast(TypeChecker.getInstance().getTypeOf(_context.getNode()), "TasksAndSyncs.structure.FutureType"), "returnType", true), "com.mbeddr.core.expressions.structure.VoidType")) {
      return NameGenerator.getVoidFutureFunctionName();
    } else {
      return NameGenerator.getFutureFunctionName();
    }
  }

  public static Object referenceMacro_GetReferent_7518664430154520031(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    if (SNodeOperations.isInstanceOf(SLinkOperations.getTarget(SNodeOperations.cast(TypeChecker.getInstance().getTypeOf(SLinkOperations.getTarget(_context.getNode(), "future", true)), "TasksAndSyncs.structure.FutureType"), "returnType", true), "com.mbeddr.core.expressions.structure.VoidType")) {
      return NameGenerator.getVoidFutureSaveAndJoinFunctionName();
    } else {
      return NameGenerator.getFutureSaveAndJoinFunctionName();
    }
  }

  public static Object referenceMacro_GetReferent_7518664430151856372(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    if (SNodeOperations.isInstanceOf(SLinkOperations.getTarget(SNodeOperations.cast(TypeChecker.getInstance().getTypeOf(SLinkOperations.getTarget(_context.getNode(), "future", true)), "TasksAndSyncs.structure.FutureType"), "returnType", true), "com.mbeddr.core.expressions.structure.VoidType")) {
      return NameGenerator.getVoidFutureJoinFunctionName();
    } else {
      return NameGenerator.getFutureJoinFunctionName();
    }
  }

  public static Object referenceMacro_GetReferent_4390787788471112612(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return NameGenerator.getFutureResultFunctionName();
  }

  public static Object referenceMacro_GetReferent_4644263955274749574(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return _context.getOutputNodeByInputNodeAndMappingLabel(_context.getNode(), "argsStruct");
  }

  public static Object referenceMacro_GetReferent_4644263955274683221(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return _context.getOutputNodeByInputNodeAndMappingLabel(_context.getNode(), "argsStruct");
  }

  public static Object referenceMacro_GetReferent_7288607883539663801(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return NameGenerator.getFutureStructName();
  }

  public static Object referenceMacro_GetReferent_7288607883539589338(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return "fun";
  }

  public static Object referenceMacro_GetReferent_7288607883539589346(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return "args";
  }

  public static Object referenceMacro_GetReferent_7288607883539589354(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return NameGenerator.getFutureStructName();
  }

  public static Object referenceMacro_GetReferent_7288607883539589365(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return NameGenerator.getFutureStructName();
  }

  public static Object referenceMacro_GetReferent_7288607883539679450(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return NameGenerator.getTaskStructName();
  }

  public static Object referenceMacro_GetReferent_482600553440749753(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return _context.getOutputNodeByInputNodeAndMappingLabel(_context.getNode(), "argsStruct");
  }

  public static Object referenceMacro_GetReferent_482600553440749765(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return _context.getOutputNodeByInputNodeAndMappingLabel(_context.getNode(), "argsStruct");
  }

  public static boolean ifMacro_Condition_6480032978533719459(final IOperationContext operationContext, final IfMacroContext _context) {
    return !(SNodeOperations.isInstanceOf(SLinkOperations.getTarget(SLinkOperations.getTarget(_context.getNode(), "var", false), "type", true), "com.mbeddr.core.pointers.structure.ArrayType"));
  }

  public static boolean ifMacro_Condition_5853110027233552314(final IOperationContext operationContext, final IfMacroContext _context) {
    return !(SNodeOperations.isInstanceOf(TypeChecker.getInstance().getTypeOf(SLinkOperations.getTarget(_context.getNode(), "expression", true)), "com.mbeddr.core.pointers.structure.PointerType"));
  }

  public static boolean ifMacro_Condition_5853110027225425714(final IOperationContext operationContext, final IfMacroContext _context) {
    return !(SNodeOperations.isInstanceOf(TypeChecker.getInstance().getTypeOf(SLinkOperations.getTarget(_context.getNode(), "expression", true)), "com.mbeddr.core.pointers.structure.PointerType"));
  }

  public static SNode sourceNodeQuery_7518664430154520024(final IOperationContext operationContext, final SourceSubstituteMacroNodeContext _context) {
    return SLinkOperations.getTarget(_context.getNode(), "future", true);
  }

  public static SNode sourceNodeQuery_482600553443548613(final IOperationContext operationContext, final SourceSubstituteMacroNodeContext _context) {
    return SLinkOperations.getTarget(_context.getNode(), "future", true);
  }

  public static SNode sourceNodeQuery_4390787788471076060(final IOperationContext operationContext, final SourceSubstituteMacroNodeContext _context) {
    return SNodeOperations.copyNode(SLinkOperations.getTarget(SNodeOperations.cast(TypeChecker.getInstance().getTypeOf(SLinkOperations.getTarget(_context.getNode(), "future", true)), "TasksAndSyncs.structure.FutureType"), "returnType", true));
  }

  public static SNode sourceNodeQuery_4390787788471115504(final IOperationContext operationContext, final SourceSubstituteMacroNodeContext _context) {
    return SLinkOperations.getTarget(_context.getNode(), "future", true);
  }

  public static SNode sourceNodeQuery_4644263955274064956(final IOperationContext operationContext, final SourceSubstituteMacroNodeContext _context) {
    if (!(SNodeOperations.isInstanceOf(SLinkOperations.getTarget(_context.getNode(), "type", true), "com.mbeddr.core.pointers.structure.ArrayType"))) {
      return SLinkOperations.getTarget(_context.getNode(), "type", true);
    }

    SNode innerPointerType = SConceptOperations.createNewNode("com.mbeddr.core.pointers.structure.PointerType", null);
    final Wrappers._T<SNode> outerPointerType = new Wrappers._T<SNode>(innerPointerType);
    SNode typeOfArg = SNodeOperations.cast(SLinkOperations.getTarget(_context.getNode(), "type", true), "com.mbeddr.core.pointers.structure.ArrayType");
    while (SNodeOperations.isInstanceOf(SLinkOperations.getTarget(typeOfArg, "baseType", true), "com.mbeddr.core.pointers.structure.ArrayType")) {
      typeOfArg = SNodeOperations.cast(SLinkOperations.getTarget(typeOfArg, "baseType", true), "com.mbeddr.core.pointers.structure.ArrayType");
      outerPointerType.value = new _FunctionTypes._return_P0_E0<SNode>() {
        public SNode invoke() {
          final SNode node_5853110027235963745 = new _FunctionTypes._return_P0_E0<SNode>() {
            public SNode invoke() {
              SNode res = outerPointerType.value;
              return res;
            }
          }.invoke();
          SNode node_5853110027235963744 = new _FunctionTypes._return_P0_E0<SNode>() {
            public SNode invoke() {
              SNode res = SConceptOperations.createNewNode("com.mbeddr.core.pointers.structure.PointerType", null);
              SLinkOperations.setTarget(res, "baseType", node_5853110027235963745, true);
              return res;
            }
          }.invoke();
          return node_5853110027235963744;
        }
      }.invoke();
    }
    SLinkOperations.setTarget(innerPointerType, "baseType", SLinkOperations.getTarget(typeOfArg, "baseType", true), true);
    return outerPointerType.value;
  }

  public static Iterable<SNode> sourceNodesQuery_8376727689346755602(final IOperationContext operationContext, final SourceSubstituteMacroNodesContext _context) {
    return SNodeOperations.getDescendants(SLinkOperations.getTarget(_context.getNode(), "expression", true), "com.mbeddr.core.statements.structure.LocalVarRef", false, new String[]{});
  }

  public static Iterable<SNode> sourceNodesQuery_6480032978533298664(final IOperationContext operationContext, final SourceSubstituteMacroNodesContext _context) {
    return SNodeOperations.getDescendants(SLinkOperations.getTarget(_context.getNode(), "expression", true), "com.mbeddr.core.statements.structure.LocalVarRef", false, new String[]{});
  }

  public static Iterable<SNode> sourceNodesQuery_5853110027219942576(final IOperationContext operationContext, final SourceSubstituteMacroNodesContext _context) {
    return ListSequence.fromList(SLinkOperations.getTargets(_context.getNode(), "ressources", true)).where(new IWhereFilter<SNode>() {
      public boolean accept(SNode it) {
        return SNodeOperations.isInstanceOf(it, "TasksAndSyncs.structure.SyncRessourceNamed");
      }
    });
  }

  public static Iterable<SNode> sourceNodesQuery_5853110027234446699(final IOperationContext operationContext, final SourceSubstituteMacroNodesContext _context) {
    return ListSequence.fromList(SLinkOperations.getTargets(_context.getNode(), "ressources", true)).where(new IWhereFilter<SNode>() {
      public boolean accept(SNode it) {
        return SNodeOperations.isInstanceOf(it, "TasksAndSyncs.structure.SyncRessourceNamed");
      }
    });
  }

  public static Iterable<SNode> sourceNodesQuery_5853110027234482331(final IOperationContext operationContext, final SourceSubstituteMacroNodesContext _context) {
    return ListSequence.fromList(SLinkOperations.getTargets(_context.getNode(), "ressources", true)).where(new IWhereFilter<SNode>() {
      public boolean accept(SNode it) {
        return SNodeOperations.isInstanceOf(it, "TasksAndSyncs.structure.SyncRessourceNamed");
      }
    });
  }

  public static Iterable<SNode> sourceNodesQuery_4644263955273538232(final IOperationContext operationContext, final SourceSubstituteMacroNodesContext _context) {
    return ListSequence.fromList(SNodeOperations.getDescendants(_context.getNode(), "com.mbeddr.core.statements.structure.LocalVarRef", false, new String[]{})).where(new IWhereFilter<SNode>() {
      public boolean accept(SNode it) {
        return (SLinkOperations.getTarget(it, "var", false) != null);
      }
    }).select(new ISelector<SNode, SNode>() {
      public SNode select(SNode it) {
        return SLinkOperations.getTarget(it, "var", false);
      }
    });
  }

  public static SNode weaving_MappingRule_ContextNodeQuery_4644263955273501386(final IOperationContext operationContext, final WeavingMappingRuleContext _context) {
    return _context.getCopiedOutputNodeForInputNode(SNodeOperations.getAncestor(_context.getNode(), "com.mbeddr.core.modules.structure.ImplementationModule", false, false));
  }

  public static SNode weaving_MappingRule_ContextNodeQuery_4644263955274607916(final IOperationContext operationContext, final WeavingMappingRuleContext _context) {
    return _context.getCopiedOutputNodeForInputNode(SNodeOperations.getAncestor(_context.getNode(), "com.mbeddr.core.modules.structure.ImplementationModule", false, false));
  }

  public static SNode weaving_MappingRule_ContextNodeQuery_482600553440859523(final IOperationContext operationContext, final WeavingMappingRuleContext _context) {
    return _context.getCopiedOutputNodeForInputNode(SNodeOperations.getAncestor(_context.getNode(), "com.mbeddr.core.modules.structure.ImplementationModule", false, false));
  }

  public static void mappingScript_CodeBlock_6843270485077871161(final IOperationContext operationContext, final MappingScriptContext _context) {
    for (final SNode future : ListSequence.fromList(SModelOperations.getNodes(_context.getModel(), "TasksAndSyncs.structure.FutureResult"))) {
      SNodeOperations.replaceWithAnother(SNodeOperations.getParent(future), new _FunctionTypes._return_P0_E0<SNode>() {
        public SNode invoke() {
          final SNode node_5853110027235963871 = new _FunctionTypes._return_P0_E0<SNode>() {
            public SNode invoke() {
              SNode res = SLinkOperations.getTarget(SNodeOperations.cast(SNodeOperations.getParent(future), "com.mbeddr.core.expressions.structure.GenericDotExpression"), "expression", true);
              return res;
            }
          }.invoke();
          SNode node_5853110027235963870 = new _FunctionTypes._return_P0_E0<SNode>() {
            public SNode invoke() {
              SNode res = SConceptOperations.createNewNode("TasksAndSyncs.structure.FutureResultContainer", null);
              SLinkOperations.setTarget(res, "future", node_5853110027235963871, true);
              return res;
            }
          }.invoke();
          return node_5853110027235963870;
        }
      }.invoke());
    }

    for (final SNode future : ListSequence.fromList(SModelOperations.getNodes(_context.getModel(), "TasksAndSyncs.structure.FutureJoin"))) {
      SNodeOperations.replaceWithAnother(SNodeOperations.getParent(future), new _FunctionTypes._return_P0_E0<SNode>() {
        public SNode invoke() {
          final SNode node_5853110027235963894 = new _FunctionTypes._return_P0_E0<SNode>() {
            public SNode invoke() {
              SNode res = SLinkOperations.getTarget(SNodeOperations.cast(SNodeOperations.getParent(future), "com.mbeddr.core.expressions.structure.GenericDotExpression"), "expression", true);
              return res;
            }
          }.invoke();
          SNode node_5853110027235963893 = new _FunctionTypes._return_P0_E0<SNode>() {
            public SNode invoke() {
              SNode res = SConceptOperations.createNewNode("TasksAndSyncs.structure.FutureJoinContainer", null);
              SLinkOperations.setTarget(res, "future", node_5853110027235963894, true);
              return res;
            }
          }.invoke();
          return node_5853110027235963893;
        }
      }.invoke());
    }

    for (final SNode future : ListSequence.fromList(SModelOperations.getNodes(_context.getModel(), "TasksAndSyncs.structure.Future"))) {
      SNodeOperations.replaceWithAnother(SNodeOperations.getParent(future), new _FunctionTypes._return_P0_E0<SNode>() {
        public SNode invoke() {
          final SNode node_5853110027235963917 = new _FunctionTypes._return_P0_E0<SNode>() {
            public SNode invoke() {
              SNode res = SLinkOperations.getTarget(SNodeOperations.cast(SNodeOperations.getParent(future), "com.mbeddr.core.expressions.structure.GenericDotExpression"), "expression", true);
              return res;
            }
          }.invoke();
          SNode node_5853110027235963916 = new _FunctionTypes._return_P0_E0<SNode>() {
            public SNode invoke() {
              SNode res = SConceptOperations.createNewNode("TasksAndSyncs.structure.FutureContainer", null);
              SLinkOperations.setTarget(res, "task", node_5853110027235963917, true);
              return res;
            }
          }.invoke();
          return node_5853110027235963916;
        }
      }.invoke());
    }
  }

  public static void mappingScript_CodeBlock_6340335959758487422(final IOperationContext operationContext, final MappingScriptContext _context) {
    SNode genericTaskModule = ListSequence.fromList(SModelOperations.getRoots(_context.getModel(), "com.mbeddr.core.modules.structure.ImplementationModule")).findFirst(new IWhereFilter<SNode>() {
      public boolean accept(SNode it) {
        return SPropertyOperations.getString(it, "name").equals(NameGenerator.getGenericTaskModuleName());
      }
    });

    SNode voidPointerType = new _FunctionTypes._return_P0_E0<SNode>() {
      public SNode invoke() {
        final SNode node_5853110027235963954 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("jetbrains.mps.baseLanguage.structure.VoidType", null);
            return res;
          }
        }.invoke();
        SNode node_5853110027235963952 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.pointers.structure.PointerType", null);
            SLinkOperations.setTarget(res, "baseType", node_5853110027235963954, true);
            return res;
          }
        }.invoke();
        return node_5853110027235963952;
      }
    }.invoke();

    SNode taskStruct = TaskDefinitionBuilder.buildTaskStruct(false, NameGenerator.getTaskStructName());
    ListSequence.fromList(SLinkOperations.getTargets(genericTaskModule, "contents", true)).addElement(taskStruct);

    SNode futureStruct = TaskDefinitionBuilder.buildFutureStruct(false, NameGenerator.getFutureStructName());
    ListSequence.fromList(SLinkOperations.getTargets(genericTaskModule, "contents", true)).addElement(futureStruct);

    SNode voidFutureStruct = TaskDefinitionBuilder.buildFutureStruct(true, NameGenerator.getVoidFutureStructName());
    ListSequence.fromList(SLinkOperations.getTargets(genericTaskModule, "contents", true)).addElement(voidFutureStruct);

    SNode futureFunction = TaskDefinitionBuilder.buildFutureFunction(taskStruct, futureStruct, NameGenerator.getFutureFunctionName());
    ListSequence.fromList(SLinkOperations.getTargets(genericTaskModule, "contents", true)).addElement(futureFunction);

    SNode voidFutureFunction = TaskDefinitionBuilder.buildFutureFunction(taskStruct, voidFutureStruct, NameGenerator.getVoidFutureFunctionName());
    ListSequence.fromList(SLinkOperations.getTargets(genericTaskModule, "contents", true)).addElement(voidFutureFunction);

    SNode futureJoinFunction = TaskDefinitionBuilder.buildFutureJoinFunction(futureStruct, NameGenerator.getFutureJoinFunctionName());
    ListSequence.fromList(SLinkOperations.getTargets(genericTaskModule, "contents", true)).addElement(futureJoinFunction);

    SNode voidFutureJoinFunction = TaskDefinitionBuilder.buildFutureJoinFunction(voidFutureStruct, NameGenerator.getVoidFutureJoinFunctionName());
    ListSequence.fromList(SLinkOperations.getTargets(genericTaskModule, "contents", true)).addElement(voidFutureJoinFunction);

    SNode voidFutureSaveAndJoinFunction = TaskDefinitionBuilder.buildFutureSaveAndJoinFunction(voidFutureStruct, voidFutureJoinFunction, NameGenerator.getVoidFutureSaveAndJoinFunctionName());
    ListSequence.fromList(SLinkOperations.getTargets(genericTaskModule, "contents", true)).addElement(voidFutureSaveAndJoinFunction);

    SNode futureSaveAndJoinFunction = TaskDefinitionBuilder.buildFutureSaveAndJoinFunction(futureStruct, futureJoinFunction, NameGenerator.getFutureSaveAndJoinFunctionName());
    ListSequence.fromList(SLinkOperations.getTargets(genericTaskModule, "contents", true)).addElement(futureSaveAndJoinFunction);

    SNode futureResultFunction = TaskDefinitionBuilder.buildFutureResultFunction(futureStruct);
    ListSequence.fromList(SLinkOperations.getTargets(genericTaskModule, "contents", true)).addElement(futureResultFunction);
  }

  public static void mappingScript_CodeBlock_2852056939580752791(final IOperationContext operationContext, final MappingScriptContext _context) {
    SNode genericSharedModule = ListSequence.fromList(SModelOperations.getRoots(_context.getModel(), "com.mbeddr.core.modules.structure.ImplementationModule")).findFirst(new IWhereFilter<SNode>() {
      public boolean accept(SNode it) {
        return SPropertyOperations.getString(it, "name").equals(NameGenerator.getGenericSharedModuleName());
      }
    });

    List<Pair<SNode, SNode>> typesAndStructs = ListSequence.fromList(new ArrayList<Pair<SNode, SNode>>());

    // create structs for shared types 
    for (SNode implementationModule : ListSequence.fromList(SModelOperations.getRoots(_context.getModel(), "com.mbeddr.core.modules.structure.ImplementationModule"))) {
      for (SNode sharedType : ListSequence.fromList(SNodeOperations.getDescendants(implementationModule, "TasksAndSyncs.structure.SharedType", false, new String[]{}))) {
        SNode structForShared = SyncDefinitionBuilder.getStructForType(_context, typesAndStructs, sharedType);
        if (structForShared == null) {
          structForShared = SyncDefinitionBuilder.addStructForType(_context, typesAndStructs, sharedType);
          SNode definitionModule;
          // for user defined types (structs, typedefs) the definitions of shared types thereof should  
          // take place in the same implementation modules so that they will be imported correctly 
          SNode baseType = SLinkOperations.getTarget(sharedType, "baseType", true);
          if (SNodeOperations.isInstanceOf(baseType, "com.mbeddr.core.udt.structure.StructType")) {
            definitionModule = SNodeOperations.getAncestor(SLinkOperations.getTarget(SNodeOperations.cast(baseType, "com.mbeddr.core.udt.structure.StructType"), "struct", false), "com.mbeddr.core.modules.structure.ImplementationModule", false, false);
          } else if (SNodeOperations.isInstanceOf(baseType, "com.mbeddr.core.udt.structure.TypeDefType")) {
            definitionModule = SNodeOperations.getAncestor(SLinkOperations.getTarget(SNodeOperations.cast(baseType, "com.mbeddr.core.udt.structure.TypeDefType"), "typeDef", false), "com.mbeddr.core.modules.structure.ImplementationModule", false, false);
          } else {
            // for all other types the generic implementation module can be usedd 
            definitionModule = genericSharedModule;
          }
          ListSequence.fromList(SLinkOperations.getTargets(definitionModule, "contents", true)).addElement(structForShared);
        }
      }
    }

    // find entry function (typically this is 'main') and the corresponding module 
    // TODO: might not be the right one 
    SNode entryFunction = null;
    final Wrappers._T<SNode> entryModule = new Wrappers._T<SNode>(null);
    for (SNode implementationModule : ListSequence.fromList(SModelOperations.getRoots(_context.getModel(), "com.mbeddr.core.modules.structure.ImplementationModule"))) {
      SNode foundFunction = ListSequence.fromList(SNodeOperations.getDescendants(implementationModule, "com.mbeddr.core.modules.structure.Function", false, new String[]{})).findFirst(new IWhereFilter<SNode>() {
        public boolean accept(SNode it) {
          return SPropertyOperations.getString(it, "name").equals("main");
        }
      });
      if (foundFunction != null) {
        entryFunction = foundFunction;
        entryModule.value = implementationModule;
        break;
      }
    }

    // create generic function:  
    // initMutex(pthread_mutexattr_t* mutexAttribute, pthread_mutex_t* mutex) { 
    //   pthread_mutexattr_settype(mutexAttribute, PTHREAD_MUTEX_RECURSIVE); 
    //   pthread_mutex_init(mutex, mutexAttribute); 
    // } 
    SNode initMutexFunction = SyncDefinitionBuilder.buildInitMutexFunction(_context);
    ListSequence.fromList(SLinkOperations.getTargets(genericSharedModule, "contents", true)).addElement(initMutexFunction);

    // create generic function:  
    // destroyMutex(pthread_mutex_t* mutex) { 
    //   pthread_mutex_destroy(mutex); 
    // } 
    SNode destroyMutexFunction = SyncDefinitionBuilder.buildDestroyMutexFunction(_context);
    ListSequence.fromList(SLinkOperations.getTargets(genericSharedModule, "contents", true)).addElement(destroyMutexFunction);

    // create initialization and destruction statements for global shared ressources 
    List<SNode> callsOfInitGlobalMutexesForAllModules = new ArrayList<SNode>();
    List<SNode> callsOfDestroyGlobalMutexesForAllModules = new ArrayList<SNode>();
    List<SNode> modulesWithGlobalMutexes = new ArrayList<SNode>();

    // for each implementation module create separate mutex initialization/destruction functions 
    for (SNode implementationModule : ListSequence.fromList(SModelOperations.getRoots(_context.getModel(), "com.mbeddr.core.modules.structure.ImplementationModule"))) {
      List<SNode> callsOfInitGlobalMutexesFor1Module = new ArrayList<SNode>();
      for (final SNode globalVariableDeclaration : ListSequence.fromList(SNodeOperations.getDescendants(implementationModule, "com.mbeddr.core.modules.structure.GlobalVariableDeclaration", false, new String[]{}))) {
        SNode varType = SLinkOperations.getTarget(globalVariableDeclaration, "type", true);
        SNode varRef = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode node_5853110027235964371 = new _FunctionTypes._return_P0_E0<SNode>() {
              public SNode invoke() {
                SNode res = SConceptOperations.createNewNode("com.mbeddr.core.modules.structure.GlobalVarRef", null);
                SLinkOperations.setTarget(res, "var", globalVariableDeclaration, false);
                return res;
              }
            }.invoke();
            return node_5853110027235964371;
          }
        }.invoke();
        SNode varInit = SLinkOperations.getTarget(globalVariableDeclaration, "init", true);

        ListSequence.fromList(callsOfInitGlobalMutexesFor1Module).addSequence(ListSequence.fromList(SyncDefinitionBuilder.buildInitMutexCallsFor(_context, initMutexFunction, varType, varRef, varInit)));
      }
      // now we know whether any of the global variables refers to some shared ressource 
      if (ListSequence.fromList(callsOfInitGlobalMutexesFor1Module).isEmpty()) {
        continue;
      }

      ListSequence.fromList(modulesWithGlobalMutexes).addElement(implementationModule);

      // create init function for global mutexes of the current module 
      String initGlobalMutexesFor1ModuleName = _context.createUniqueName("initGlobalMutexesFor1Module", null);
      final SNode initGlobalMutexesFor1Module = SyncDefinitionBuilder.buildVoidExportedFunction(callsOfInitGlobalMutexesFor1Module, null, initGlobalMutexesFor1ModuleName);
      ListSequence.fromList(SLinkOperations.getTargets(implementationModule, "contents", true)).addElement(initGlobalMutexesFor1Module);

      // create destruction function for global mutexes of the current module 
      String destroyGlobalMutexesFor1ModuleName = _context.createUniqueName("destroyGlobalMutexesFor1Module", null);
      final SNode destroyGlobalMutexesFor1Module = SNodeOperations.copyNode(initGlobalMutexesFor1Module);
      SPropertyOperations.set(destroyGlobalMutexesFor1Module, "name", destroyGlobalMutexesFor1ModuleName);
      SyncDefinitionBuilder.convertInitToDestroyMutexCall(destroyGlobalMutexesFor1Module, initMutexFunction, destroyMutexFunction);
      ListSequence.fromList(SLinkOperations.getTargets(implementationModule, "contents", true)).addElement(destroyGlobalMutexesFor1Module);

      // add calls to both functions to the corresponding containers 
      ListSequence.fromList(callsOfInitGlobalMutexesForAllModules).addElement(new _FunctionTypes._return_P0_E0<SNode>() {
        public SNode invoke() {
          final SNode node_5853110027235964470 = new _FunctionTypes._return_P0_E0<SNode>() {
            public SNode invoke() {
              SNode res = SConceptOperations.createNewNode("com.mbeddr.core.modules.structure.FunctionCall", null);
              SLinkOperations.setTarget(res, "function", destroyGlobalMutexesFor1Module, false);
              return res;
            }
          }.invoke();
          SNode node_5853110027235964469 = new _FunctionTypes._return_P0_E0<SNode>() {
            public SNode invoke() {
              SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.ExpressionStatement", null);
              SLinkOperations.setTarget(res, "expr", node_5853110027235964470, true);
              return res;
            }
          }.invoke();
          return node_5853110027235964469;
        }
      }.invoke());
      ListSequence.fromList(callsOfDestroyGlobalMutexesForAllModules).addElement(new _FunctionTypes._return_P0_E0<SNode>() {
        public SNode invoke() {
          final SNode node_5853110027235964481 = new _FunctionTypes._return_P0_E0<SNode>() {
            public SNode invoke() {
              SNode res = SConceptOperations.createNewNode("com.mbeddr.core.modules.structure.FunctionCall", null);
              SLinkOperations.setTarget(res, "function", initGlobalMutexesFor1Module, false);
              return res;
            }
          }.invoke();
          SNode node_5853110027235964480 = new _FunctionTypes._return_P0_E0<SNode>() {
            public SNode invoke() {
              SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.ExpressionStatement", null);
              SLinkOperations.setTarget(res, "expr", node_5853110027235964481, true);
              return res;
            }
          }.invoke();
          return node_5853110027235964480;
        }
      }.invoke());
    }

    // ensure that the module corresponding to the entry function imports all other modules that have 
    // global data with shared ressources (hence, mutexes therein need to be initialized); 
    // this way the entry module has access to all exported mutex management functions  
    for (SNode implementationModule : ListSequence.fromList(modulesWithGlobalMutexes).where(new IWhereFilter<SNode>() {
      public boolean accept(SNode it) {
        return it != entryModule.value;
      }
    })) {
      if (!(ListSequence.fromList(SLinkOperations.getTargets(entryModule.value, "imports", true)).any(new IWhereFilter<SNode>() {
        public boolean accept(SNode it) {
          return SNodeOperations.isInstanceOf(it, "com.mbeddr.core.base.structure.DefaultGenericChunkDependency") && SLinkOperations.getTarget(SNodeOperations.cast(it, "com.mbeddr.core.base.structure.DefaultGenericChunkDependency"), "chunk", false) == entryModule.value;
        }
      }))) {
        SNode moduleImport = SConceptOperations.createNewNode("com.mbeddr.core.base.structure.DefaultGenericChunkDependency", null);
        SLinkOperations.setTarget(moduleImport, "chunk", implementationModule, false);
        ListSequence.fromList(SLinkOperations.getTargets(entryModule.value, "imports", true)).addElement(moduleImport);
      }
    }

    if (ListSequence.fromList(callsOfInitGlobalMutexesForAllModules).count() > 0) {
      // create one main init function that calls all module-specific init functions 
      String initAllFunctionName = _context.createUniqueName("initAllGlobalMutexes", null);
      final SNode initAllFunction = SyncDefinitionBuilder.buildVoidExportedFunction(callsOfInitGlobalMutexesForAllModules, null, initAllFunctionName);
      ListSequence.fromList(SLinkOperations.getTargets(SNodeOperations.getAncestor(entryFunction, "com.mbeddr.core.modules.structure.ImplementationModule", false, false), "contents", true)).addElement(initAllFunction);

      // create one main init function that calls all module-specific init functions 
      String destroyAllFunctionName = _context.createUniqueName("destroyAllGlobalMutexes", null);
      final SNode destroyAllFunction = SyncDefinitionBuilder.buildVoidExportedFunction(callsOfDestroyGlobalMutexesForAllModules, null, destroyAllFunctionName);
      ListSequence.fromList(SLinkOperations.getTargets(SNodeOperations.getAncestor(entryFunction, "com.mbeddr.core.modules.structure.ImplementationModule", false, false), "contents", true)).addElement(destroyAllFunction);

      // add calls to both functions: 'init' at the beginning of main, 'destroy' before each return (and at the end) 
      ListSequence.fromList(SLinkOperations.getTargets(SLinkOperations.getTarget(entryFunction, "body", true), "statements", true)).insertElement(0, new _FunctionTypes._return_P0_E0<SNode>() {
        public SNode invoke() {
          final SNode node_5853110027235964621 = new _FunctionTypes._return_P0_E0<SNode>() {
            public SNode invoke() {
              SNode res = SConceptOperations.createNewNode("com.mbeddr.core.modules.structure.FunctionCall", null);
              SLinkOperations.setTarget(res, "function", initAllFunction, false);
              return res;
            }
          }.invoke();
          SNode node_5853110027235964620 = new _FunctionTypes._return_P0_E0<SNode>() {
            public SNode invoke() {
              SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.ExpressionStatement", null);
              SLinkOperations.setTarget(res, "expr", node_5853110027235964621, true);
              return res;
            }
          }.invoke();
          return node_5853110027235964620;
        }
      }.invoke());
      final SNode callDestroyAllFunction = new _FunctionTypes._return_P0_E0<SNode>() {
        public SNode invoke() {
          final SNode node_5853110027235964631 = new _FunctionTypes._return_P0_E0<SNode>() {
            public SNode invoke() {
              SNode res = SConceptOperations.createNewNode("com.mbeddr.core.modules.structure.FunctionCall", null);
              SLinkOperations.setTarget(res, "function", destroyAllFunction, false);
              return res;
            }
          }.invoke();
          SNode node_5853110027235964630 = new _FunctionTypes._return_P0_E0<SNode>() {
            public SNode invoke() {
              SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.ExpressionStatement", null);
              SLinkOperations.setTarget(res, "expr", node_5853110027235964631, true);
              return res;
            }
          }.invoke();
          return node_5853110027235964630;
        }
      }.invoke();
      ListSequence.fromList(SNodeOperations.getDescendants(SLinkOperations.getTarget(entryFunction, "body", true), "com.mbeddr.core.modules.structure.ReturnStatement", false, new String[]{})).visitAll(new IVisitor<SNode>() {
        public void visit(SNode it) {
          SNodeOperations.insertPrevSiblingChild(it, SNodeOperations.copyNode(callDestroyAllFunction));
        }
      });

      if (BehaviorReflection.invokeVirtual(Boolean.TYPE, SLinkOperations.getTarget(entryFunction, "type", true), "virtual_isVoid_7892328519581699357", new Object[]{}) && !(SNodeOperations.isInstanceOf(ListSequence.fromList(SLinkOperations.getTargets(SLinkOperations.getTarget(entryFunction, "body", true), "statements", true)).last(), "com.mbeddr.core.modules.structure.ReturnStatement"))) {
        ListSequence.fromList(SLinkOperations.getTargets(SLinkOperations.getTarget(entryFunction, "body", true), "statements", true)).addElement(callDestroyAllFunction);
      }
    }

    // create initialization statements for local shared ressources 
    for (SNode implementationModule : ListSequence.fromList(SModelOperations.getRoots(_context.getModel(), "com.mbeddr.core.modules.structure.ImplementationModule"))) {
      for (SNode function : Sequence.fromIterable(SNodeOperations.ofConcept(SLinkOperations.getTargets(implementationModule, "contents", true), "com.mbeddr.core.modules.structure.Function"))) {
        for (final SNode localVariableDeclaration : ListSequence.fromList(SNodeOperations.getDescendants(function, "com.mbeddr.core.statements.structure.LocalVariableDeclaration", false, new String[]{}))) {
          // create statements 
          List<SNode> localInitStatements = new ArrayList<SNode>();
          List<SNode> localDestroyStatements = new ArrayList<SNode>();

          SNode varType = SLinkOperations.getTarget(localVariableDeclaration, "type", true);
          SNode varRef = new _FunctionTypes._return_P0_E0<SNode>() {
            public SNode invoke() {
              SNode node_5853110027235964739 = new _FunctionTypes._return_P0_E0<SNode>() {
                public SNode invoke() {
                  SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.LocalVarRef", null);
                  SLinkOperations.setTarget(res, "var", localVariableDeclaration, false);
                  return res;
                }
              }.invoke();
              return node_5853110027235964739;
            }
          }.invoke();
          SNode varInit = SLinkOperations.getTarget(localVariableDeclaration, "init", true);

          ListSequence.fromList(localInitStatements).addSequence(ListSequence.fromList(SyncDefinitionBuilder.buildInitMutexCallsFor(_context, initMutexFunction, varType, varRef, varInit)));
          // if no shared data needs to be initialized skip the current variable 
          if (ListSequence.fromList(localInitStatements).count() == 0) {
            continue;
          }

          // if the variable itself is of a shared type the access to its members must be accomplished by an "->" 
          // instead of a "." 
          if (SNodeOperations.isInstanceOf(SLinkOperations.getTarget(localVariableDeclaration, "type", true), "TasksAndSyncs.structure.SharedType")) {
            ListSequence.fromList(SNodeOperations.getDescendants(ListSequence.fromList(localInitStatements).first(), "com.mbeddr.core.statements.structure.AbritraryTextItem", false, new String[]{})).visitAll(new IVisitor<SNode>() {
              public void visit(SNode it) {
                SPropertyOperations.set(it, "text", SPropertyOperations.getString(it, "text").replaceAll("\\.", "->"));
              }
            });
          }

          // map the init statements to destroy statements  
          for (SNode localInitStatement : ListSequence.fromList(localInitStatements)) {
            ListSequence.fromList(localDestroyStatements).addElement(SNodeOperations.copyNode(localInitStatement));
            SyncDefinitionBuilder.convertInitToDestroyMutexCall(ListSequence.fromList(localDestroyStatements).last(), initMutexFunction, destroyMutexFunction);
          }

          // wrap init and destroy statements in inline functions for better legibility 
          final String variableName = SPropertyOperations.getString(localVariableDeclaration, "name");
          SNode variableArgument = SConceptOperations.createNewNode("com.mbeddr.core.modules.structure.Argument", null);
          SPropertyOperations.set(variableArgument, "name", variableName);
          if (SNodeOperations.isInstanceOf(SLinkOperations.getTarget(localVariableDeclaration, "type", true), "com.mbeddr.core.pointers.structure.ArrayType")) {
            SLinkOperations.setTarget(variableArgument, "type", SyncDefinitionBuilder.mapArrayTypeToPointerType(SLinkOperations.getTarget(localVariableDeclaration, "type", true)), true);
          } else {
            SLinkOperations.setTarget(variableArgument, "type", new _FunctionTypes._return_P0_E0<SNode>() {
              public SNode invoke() {
                final SNode node_5853110027235964876 = new _FunctionTypes._return_P0_E0<SNode>() {
                  public SNode invoke() {
                    SNode res = SNodeOperations.copyNode(SLinkOperations.getTarget(localVariableDeclaration, "type", true));
                    return res;
                  }
                }.invoke();
                SNode node_5853110027235964875 = new _FunctionTypes._return_P0_E0<SNode>() {
                  public SNode invoke() {
                    SNode res = SConceptOperations.createNewNode("com.mbeddr.core.pointers.structure.PointerType", null);
                    SLinkOperations.setTarget(res, "baseType", node_5853110027235964876, true);
                    return res;
                  }
                }.invoke();
                return node_5853110027235964875;
              }
            }.invoke(), true);
          }
          final List<SNode> initArgs = new ArrayList<SNode>();
          ListSequence.fromList(initArgs).addElement(SNodeOperations.copyNode(variableArgument));
          final List<SNode> destroyArgs = new ArrayList<SNode>();
          ListSequence.fromList(destroyArgs).addElement(SNodeOperations.copyNode(variableArgument));
          final SNode initVarArgRef = new _FunctionTypes._return_P0_E0<SNode>() {
            public SNode invoke() {
              SNode node_5853110027235964914 = new _FunctionTypes._return_P0_E0<SNode>() {
                public SNode invoke() {
                  SNode res = SConceptOperations.createNewNode("com.mbeddr.core.modules.structure.ArgumentRef", null);
                  SLinkOperations.setTarget(res, "arg", ListSequence.fromList(initArgs).first(), false);
                  return res;
                }
              }.invoke();
              return node_5853110027235964914;
            }
          }.invoke();
          final SNode destroyVarArgRef = new _FunctionTypes._return_P0_E0<SNode>() {
            public SNode invoke() {
              SNode node_5853110027235964924 = new _FunctionTypes._return_P0_E0<SNode>() {
                public SNode invoke() {
                  SNode res = SConceptOperations.createNewNode("com.mbeddr.core.modules.structure.ArgumentRef", null);
                  SLinkOperations.setTarget(res, "arg", ListSequence.fromList(destroyArgs).first(), false);
                  return res;
                }
              }.invoke();
              return node_5853110027235964924;
            }
          }.invoke();

          String localInitFuncName = _context.createUniqueName("init_" + variableName, null);
          final SNode localInitFunction = SyncDefinitionBuilder.buildVoidInlineFunction(localInitStatements, initArgs, localInitFuncName);
          ListSequence.fromList(SLinkOperations.getTargets(implementationModule, "contents", true)).addElement(localInitFunction);
          ListSequence.fromList(SNodeOperations.getDescendants(localInitFunction, "com.mbeddr.core.statements.structure.LocalVarRef", false, new String[]{})).where(new IWhereFilter<SNode>() {
            public boolean accept(SNode it) {
              return SPropertyOperations.getString(SLinkOperations.getTarget(it, "var", false), "name").equals(variableName);
            }
          }).visitAll(new IVisitor<SNode>() {
            public void visit(SNode it) {
              SNodeOperations.replaceWithAnother(it, SNodeOperations.copyNode(initVarArgRef));
            }
          });

          String localDestroyFuncName = _context.createUniqueName("destroy_" + variableName, null);
          final SNode localDestroyFunction = SyncDefinitionBuilder.buildVoidInlineFunction(localDestroyStatements, destroyArgs, localDestroyFuncName);
          ListSequence.fromList(SLinkOperations.getTargets(implementationModule, "contents", true)).addElement(localDestroyFunction);
          ListSequence.fromList(SNodeOperations.getDescendants(localDestroyFunction, "com.mbeddr.core.statements.structure.LocalVarRef", false, new String[]{})).where(new IWhereFilter<SNode>() {
            public boolean accept(SNode it) {
              return SPropertyOperations.getString(SLinkOperations.getTarget(it, "var", false), "name").equals(variableName);
            }
          }).visitAll(new IVisitor<SNode>() {
            public void visit(SNode it) {
              SNodeOperations.replaceWithAnother(it, SNodeOperations.copyNode(destroyVarArgRef));
            }
          });

          // create call expressions for init and destroy functions 
          final Wrappers._T<SNode> variableReference = new Wrappers._T<SNode>();
          if (SNodeOperations.isInstanceOf(SLinkOperations.getTarget(localVariableDeclaration, "type", true), "com.mbeddr.core.pointers.structure.ArrayType")) {
            variableReference.value = new _FunctionTypes._return_P0_E0<SNode>() {
              public SNode invoke() {
                SNode node_5853110027235965055 = new _FunctionTypes._return_P0_E0<SNode>() {
                  public SNode invoke() {
                    SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.LocalVarRef", null);
                    SLinkOperations.setTarget(res, "var", localVariableDeclaration, false);
                    return res;
                  }
                }.invoke();
                return node_5853110027235965055;
              }
            }.invoke();
          } else {
            variableReference.value = new _FunctionTypes._return_P0_E0<SNode>() {
              public SNode invoke() {
                final SNode node_5853110027235965073 = new _FunctionTypes._return_P0_E0<SNode>() {
                  public SNode invoke() {
                    SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.LocalVarRef", null);
                    SLinkOperations.setTarget(res, "var", localVariableDeclaration, false);
                    return res;
                  }
                }.invoke();
                SNode node_5853110027235965072 = new _FunctionTypes._return_P0_E0<SNode>() {
                  public SNode invoke() {
                    SNode res = SConceptOperations.createNewNode("com.mbeddr.core.pointers.structure.ReferenceExpr", null);
                    SLinkOperations.setTarget(res, "expression", node_5853110027235965073, true);
                    return res;
                  }
                }.invoke();
                return node_5853110027235965072;
              }
            }.invoke();
          }
          SNode callLocalInitFunction = new _FunctionTypes._return_P0_E0<SNode>() {
            public SNode invoke() {
              final SNode node_5853110027235965086 = new _FunctionTypes._return_P0_E0<SNode>() {
                public SNode invoke() {
                  SNode res = SNodeOperations.copyNode(variableReference.value);
                  return res;
                }
              }.invoke();
              final SNode node_5853110027235965083 = new _FunctionTypes._return_P0_E0<SNode>() {
                public SNode invoke() {
                  SNode res = SConceptOperations.createNewNode("com.mbeddr.core.modules.structure.FunctionCall", null);
                  ListSequence.fromList(SLinkOperations.getTargets(res, "actuals", true)).addElement(node_5853110027235965086);
                  SLinkOperations.setTarget(res, "function", localInitFunction, false);
                  return res;
                }
              }.invoke();
              SNode node_5853110027235965082 = new _FunctionTypes._return_P0_E0<SNode>() {
                public SNode invoke() {
                  SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.ExpressionStatement", null);
                  SLinkOperations.setTarget(res, "expr", node_5853110027235965083, true);
                  return res;
                }
              }.invoke();
              return node_5853110027235965082;
            }
          }.invoke();
          SNode callLocalDestroyFunction = new _FunctionTypes._return_P0_E0<SNode>() {
            public SNode invoke() {
              final SNode node_5853110027235965101 = new _FunctionTypes._return_P0_E0<SNode>() {
                public SNode invoke() {
                  SNode res = SNodeOperations.copyNode(variableReference.value);
                  return res;
                }
              }.invoke();
              final SNode node_5853110027235965098 = new _FunctionTypes._return_P0_E0<SNode>() {
                public SNode invoke() {
                  SNode res = SConceptOperations.createNewNode("com.mbeddr.core.modules.structure.FunctionCall", null);
                  ListSequence.fromList(SLinkOperations.getTargets(res, "actuals", true)).addElement(node_5853110027235965101);
                  SLinkOperations.setTarget(res, "function", localDestroyFunction, false);
                  return res;
                }
              }.invoke();
              SNode node_5853110027235965097 = new _FunctionTypes._return_P0_E0<SNode>() {
                public SNode invoke() {
                  SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.ExpressionStatement", null);
                  SLinkOperations.setTarget(res, "expr", node_5853110027235965098, true);
                  return res;
                }
              }.invoke();
              return node_5853110027235965097;
            }
          }.invoke();

          // add initialization calls after each variable declaration with shared data 
          // before the end of the current block 
          SNodeOperations.insertNextSiblingChild(localVariableDeclaration, SNodeOperations.copyNode(callLocalInitFunction));

          // add destruction statements before each following return statement in the current or some sub scope  
          for (SNode followingStatement : ListSequence.fromList(SNodeOperations.getNextSiblings(localVariableDeclaration, false))) {
            if (SNodeOperations.isInstanceOf(followingStatement, "com.mbeddr.core.modules.structure.ReturnStatement")) {
              SNodeOperations.insertPrevSiblingChild(followingStatement, SNodeOperations.copyNode(callLocalDestroyFunction));
            } else {
              for (SNode nestedReturnStatement : ListSequence.fromList(SNodeOperations.getDescendants(followingStatement, "com.mbeddr.core.modules.structure.ReturnStatement", false, new String[]{}))) {
                SNodeOperations.insertPrevSiblingChild(nestedReturnStatement, SNodeOperations.copyNode(callLocalDestroyFunction));
              }
            }
          }
          // add destruction calls before the end of the variable's scope 
          if (!(SNodeOperations.isInstanceOf(ListSequence.fromList(SNodeOperations.getNextSiblings(localVariableDeclaration, false)).last(), "com.mbeddr.core.modules.structure.ReturnStatement"))) {
            SNodeOperations.insertNextSiblingChild(ListSequence.fromList(SNodeOperations.getNextSiblings(localVariableDeclaration, false)).last(), SNodeOperations.copyNode(callLocalDestroyFunction));
          }
        }
      }
    }

    // replace all shared<> types by their corresponding struct types 
    for (SNode implementationModule : ListSequence.fromList(SModelOperations.getRoots(_context.getModel(), "com.mbeddr.core.modules.structure.ImplementationModule"))) {
      for (SNode sharedType : ListSequence.fromList(SNodeOperations.getDescendants(implementationModule, "TasksAndSyncs.structure.SharedType", false, new String[]{}))) {
        final SNode structForShared = SyncDefinitionBuilder.getStructForType(_context, typesAndStructs, sharedType);
        SNodeOperations.replaceWithAnother(sharedType, new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode node_5853110027235965210 = new _FunctionTypes._return_P0_E0<SNode>() {
              public SNode invoke() {
                SNode res = SConceptOperations.createNewNode("com.mbeddr.core.udt.structure.StructType", null);
                SLinkOperations.setTarget(res, "struct", structForShared, false);
                return res;
              }
            }.invoke();
            return node_5853110027235965210;
          }
        }.invoke());
      }
    }
  }

  public static void mappingScript_CodeBlock_2648922052117976116(final IOperationContext operationContext, final MappingScriptContext _context) {
  }

  public static void mappingScript_CodeBlock_3348893923579063300(final IOperationContext operationContext, final MappingScriptContext _context) {
    SNode genericSyncModule = ListSequence.fromList(SModelOperations.getRoots(_context.getModel(), "com.mbeddr.core.modules.structure.ImplementationModule")).findFirst(new IWhereFilter<SNode>() {
      public boolean accept(SNode it) {
        return SPropertyOperations.getString(it, "name").equals(NameGenerator.getGenericSyncModuleName());
      }
    });

    Map<Integer, SNode> argCountToStartSyncFunc = MapSequence.fromMap(new HashMap<Integer, SNode>());
    Map<Integer, SNode> argCountToStopSyncFunc = MapSequence.fromMap(new HashMap<Integer, SNode>());

    for (SNode implementationModule : ListSequence.fromList(SModelOperations.getRoots(_context.getModel(), "com.mbeddr.core.modules.structure.ImplementationModule"))) {
      // process syncs by the ascending number of nested other syncs so that the mutex releases are arranged in 
      // the same nested manner 
      for (SNode syncStatement : ListSequence.fromList(SNodeOperations.getDescendants(implementationModule, "TasksAndSyncs.structure.SyncStatement", false, new String[]{})).sort(new ISelector<SNode, Integer>() {
        public Integer select(SNode it) {
          return ListSequence.fromList(SNodeOperations.getDescendants(it, "TasksAndSyncs.structure.SyncStatement", false, new String[]{})).count();
        }
      }, true)) {
        List<SNode> ressources = SLinkOperations.getTargets(syncStatement, "ressources", true);
        List<SNode> statements = SLinkOperations.getTargets(SLinkOperations.getTarget(syncStatement, "statements", true), "statements", true);

        if (ListSequence.fromList(statements).count() == 0) {
          SNodeOperations.detachNode(syncStatement);
        } else {
          if (ListSequence.fromList(ressources).count() > 0) {
            // create functions for mutex locking/unlocking 
            SNode startSyncFunc;
            SNode stopSyncFunc;
            if (MapSequence.fromMap(argCountToStartSyncFunc).containsKey(ListSequence.fromList(ressources).count())) {
              startSyncFunc = MapSequence.fromMap(argCountToStartSyncFunc).get(ListSequence.fromList(ressources).count());
              stopSyncFunc = MapSequence.fromMap(argCountToStopSyncFunc).get(ListSequence.fromList(ressources).count());
            } else {
              startSyncFunc = SyncDefinitionBuilder.buildStartSyncFunction(_context, ListSequence.fromList(ressources).count());
              stopSyncFunc = SyncDefinitionBuilder.buildStopSyncFunction(_context, ListSequence.fromList(ressources).count());
              MapSequence.fromMap(argCountToStartSyncFunc).put(ListSequence.fromList(ressources).count(), startSyncFunc);
              MapSequence.fromMap(argCountToStopSyncFunc).put(ListSequence.fromList(ressources).count(), stopSyncFunc);
              ListSequence.fromList(SLinkOperations.getTargets(genericSyncModule, "contents", true)).addElement(startSyncFunc);
              ListSequence.fromList(SLinkOperations.getTargets(genericSyncModule, "contents", true)).addElement(stopSyncFunc);
            }

            // create pointers to mutexes for lock/unlock calls 
            List<SNode> mutexRefs = SyncDefinitionBuilder.buildMutexRefs(_context, ressources);

            // create a function call for the mutex locking right before the sync statement 
            List<SNode> startSyncRefs = new ArrayList<SNode>();
            SyncDefinitionBuilder.copyList(mutexRefs, startSyncRefs);
            SNode startSyncCall = SyncDefinitionBuilder.buildFunctionCall(startSyncRefs, startSyncFunc);
            SNodeOperations.insertPrevSiblingChild(syncStatement, startSyncCall);

            // create a function call for the mutex unlocking right after the sync statement and right before 
            // every nested return statement (currently synchronization states can not be returned from functions) 
            List<SNode> stopSyncRefs = new ArrayList<SNode>();
            SyncDefinitionBuilder.copyList(mutexRefs, stopSyncRefs);
            final SNode stopSyncCall = SyncDefinitionBuilder.buildFunctionCall(stopSyncRefs, stopSyncFunc);
            SNodeOperations.insertNextSiblingChild(syncStatement, stopSyncCall);
            ListSequence.fromList(SNodeOperations.getDescendants(syncStatement, "com.mbeddr.core.modules.structure.ReturnStatement", false, new String[]{})).visitAll(new IVisitor<SNode>() {
              public void visit(SNode it) {
                SNodeOperations.insertPrevSiblingChild(it, SNodeOperations.copyNode(stopSyncCall));
              }
            });
          }

          SNodeOperations.replaceWithAnother(syncStatement, SLinkOperations.getTarget(syncStatement, "statements", true));
        }
      }
    }
  }

  public static void mappingScript_CodeBlock_5853110027234870833(final IOperationContext operationContext, final MappingScriptContext _context) {
    // tasks and futures 
    SNode genericTaskModule = ImplementationModuleBuilder.buildGeneric(NameGenerator.getGenericTaskModuleName(), _context.getModel());

    // shared<> types 
    SNode genericSharedModule = ImplementationModuleBuilder.buildGeneric(NameGenerator.getGenericSharedModuleName(), _context.getModel());

    // sync statements => mutex locks/unlocks 
    SNode genericSyncModule = ImplementationModuleBuilder.buildGeneric(NameGenerator.getGenericSyncModuleName(), _context.getModel());
  }

  public static SNode insertMacro_Query_6480032978533910071(final IOperationContext operationContext, final TemplateQueryContextWithMacro _context) {
    final Wrappers._T<SNode> arrayAccess = new Wrappers._T<SNode>(new _FunctionTypes._return_P0_E0<SNode>() {
      public SNode invoke() {
        final SNode node_5853110027235965516 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.expressions.structure.NumberLiteral", null);
            SPropertyOperations.set(res, "value", ("0"));
            return res;
          }
        }.invoke();
        final SNode node_5853110027235965520 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SNodeOperations.copyNode(_context.getNode());
            return res;
          }
        }.invoke();
        SNode node_5853110027235965515 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.pointers.structure.ArrayAccessExpr", null);
            SLinkOperations.setTarget(res, "index", node_5853110027235965516, true);
            SLinkOperations.setTarget(res, "expression", node_5853110027235965520, true);
            return res;
          }
        }.invoke();
        return node_5853110027235965515;
      }
    }.invoke());
    SNode typeOfArg = SNodeOperations.cast(SLinkOperations.getTarget(SLinkOperations.getTarget(_context.getNode(), "var", false), "type", true), "com.mbeddr.core.pointers.structure.ArrayType");
    while (SNodeOperations.isInstanceOf(SLinkOperations.getTarget(typeOfArg, "baseType", true), "com.mbeddr.core.pointers.structure.ArrayType")) {
      typeOfArg = SNodeOperations.cast(SLinkOperations.getTarget(typeOfArg, "baseType", true), "com.mbeddr.core.pointers.structure.ArrayType");
      arrayAccess.value = new _FunctionTypes._return_P0_E0<SNode>() {
        public SNode invoke() {
          final SNode node_5853110027235965547 = new _FunctionTypes._return_P0_E0<SNode>() {
            public SNode invoke() {
              SNode res = SConceptOperations.createNewNode("com.mbeddr.core.expressions.structure.NumberLiteral", null);
              SPropertyOperations.set(res, "value", ("0"));
              return res;
            }
          }.invoke();
          final SNode node_5853110027235965551 = new _FunctionTypes._return_P0_E0<SNode>() {
            public SNode invoke() {
              SNode res = arrayAccess.value;
              return res;
            }
          }.invoke();
          SNode node_5853110027235965546 = new _FunctionTypes._return_P0_E0<SNode>() {
            public SNode invoke() {
              SNode res = SConceptOperations.createNewNode("com.mbeddr.core.pointers.structure.ArrayAccessExpr", null);
              SLinkOperations.setTarget(res, "index", node_5853110027235965547, true);
              SLinkOperations.setTarget(res, "expression", node_5853110027235965551, true);
              return res;
            }
          }.invoke();
          return node_5853110027235965546;
        }
      }.invoke();
    }
    return arrayAccess.value;
  }

  public static SNode insertMacro_Query_3074299910025853496(final IOperationContext operationContext, final TemplateQueryContextWithMacro _context) {
    SNode exprToBind = SLinkOperations.getTarget(_context.getNode(), "expr", true);
    final SNode structExpression = SLinkOperations.getTarget(_context.getNode(), "structExpr", true);
    final SNode structDeclaration = SLinkOperations.getTarget(SNodeOperations.cast(TypeChecker.getInstance().getTypeOf(structExpression), "com.mbeddr.core.udt.structure.StructType"), "struct", false);
    for (final SNode localVarRef : ListSequence.fromList(SNodeOperations.getDescendants(exprToBind, "com.mbeddr.core.statements.structure.LocalVarRef", false, new String[]{}))) {
      SNodeOperations.replaceWithAnother(localVarRef, new _FunctionTypes._return_P0_E0<SNode>() {
        public SNode invoke() {
          final SNode node_5853110027235965600 = new _FunctionTypes._return_P0_E0<SNode>() {
            public SNode invoke() {
              SNode res = structExpression;
              return res;
            }
          }.invoke();
          final SNode node_5853110027235965598 = new _FunctionTypes._return_P0_E0<SNode>() {
            public SNode invoke() {
              SNode res = SConceptOperations.createNewNode("com.mbeddr.core.expressions.structure.ParensExpression", null);
              SLinkOperations.setTarget(res, "expression", node_5853110027235965600, true);
              return res;
            }
          }.invoke();
          final SNode node_5853110027235965603 = new _FunctionTypes._return_P0_E0<SNode>() {
            public SNode invoke() {
              SNode res = SConceptOperations.createNewNode("com.mbeddr.core.udt.structure.GenericMemberRef", null);
              SLinkOperations.setTarget(res, "member", ListSequence.fromList(SUDeclaration_Behavior.call_members_9101132143318613823(structDeclaration)).findFirst(new IWhereFilter<SNode>() {
                public boolean accept(SNode it) {
                  return SPropertyOperations.hasValue(SNodeOperations.cast(it, "com.mbeddr.core.udt.structure.Member"), "name", SPropertyOperations.getString(SLinkOperations.getTarget(localVarRef, "var", false), "name"));
                }
              }), false);
              return res;
            }
          }.invoke();
          SNode node_5853110027235965596 = new _FunctionTypes._return_P0_E0<SNode>() {
            public SNode invoke() {
              SNode res = SConceptOperations.createNewNode("com.mbeddr.core.expressions.structure.GenericDotExpression", null);
              SLinkOperations.setTarget(res, "expression", node_5853110027235965598, true);
              SLinkOperations.setTarget(res, "target", node_5853110027235965603, true);
              return res;
            }
          }.invoke();
          return node_5853110027235965596;
        }
      }.invoke());
    }

    return exprToBind;
  }

  public static SNode insertMacro_Query_4390787788473864341(final IOperationContext operationContext, final TemplateQueryContextWithMacro _context) {
    return SLinkOperations.getTarget(_context.getNode(), "task", true);
  }

  public static SNode insertMacro_Query_5853110027233552272(final IOperationContext operationContext, final TemplateQueryContextWithMacro _context) {
    {
      SNode sharedType = TypeChecker.getInstance().getTypeOf(SLinkOperations.getTarget(_context.getNode(), "expression", true));
      if (SNodeOperations.isInstanceOf(sharedType, "TasksAndSyncs.structure.SharedType")) {
        return SNodeOperations.copyNode(SLinkOperations.getTarget(sharedType, "baseType", true));
      }
    }
    return SNodeOperations.copyNode(SLinkOperations.getTarget(SNodeOperations.cast(SLinkOperations.getTarget(SNodeOperations.cast(TypeChecker.getInstance().getTypeOf(SLinkOperations.getTarget(_context.getNode(), "expression", true)), "com.mbeddr.core.pointers.structure.PointerType"), "baseType", true), "TasksAndSyncs.structure.SharedType"), "baseType", true));
  }

  public static SNode insertMacro_Query_5853110027233552306(final IOperationContext operationContext, final TemplateQueryContextWithMacro _context) {
    return SLinkOperations.getTarget(_context.getNode(), "expression", true);
  }

  public static SNode insertMacro_Query_5853110027223622736(final IOperationContext operationContext, final TemplateQueryContextWithMacro _context) {
    return SLinkOperations.getTarget(SNodeOperations.cast(SLinkOperations.getTarget(_context.getNode(), "target", true), "TasksAndSyncs.structure.SharedSet"), "value", true);
  }

  public static SNode insertMacro_Query_5853110027223545169(final IOperationContext operationContext, final TemplateQueryContextWithMacro _context) {
    {
      SNode sharedType = TypeChecker.getInstance().getTypeOf(SLinkOperations.getTarget(_context.getNode(), "expression", true));
      if (SNodeOperations.isInstanceOf(sharedType, "TasksAndSyncs.structure.SharedType")) {
        return SNodeOperations.copyNode(SLinkOperations.getTarget(sharedType, "baseType", true));
      }
    }
    return SNodeOperations.copyNode(SLinkOperations.getTarget(SNodeOperations.cast(SLinkOperations.getTarget(SNodeOperations.cast(TypeChecker.getInstance().getTypeOf(SLinkOperations.getTarget(_context.getNode(), "expression", true)), "com.mbeddr.core.pointers.structure.PointerType"), "baseType", true), "TasksAndSyncs.structure.SharedType"), "baseType", true));
  }

  public static SNode insertMacro_Query_5853110027224537265(final IOperationContext operationContext, final TemplateQueryContextWithMacro _context) {
    return SLinkOperations.getTarget(_context.getNode(), "expression", true);
  }

  public static SNode insertMacro_Query_5853110027219942549(final IOperationContext operationContext, final TemplateQueryContextWithMacro _context) {
    return SNodeOperations.copyNode(TypeChecker.getInstance().getTypeOf(SLinkOperations.getTarget(_context.getNode(), "expression", true)));
  }

  public static SNode insertMacro_Query_5853110027219942561(final IOperationContext operationContext, final TemplateQueryContextWithMacro _context) {
    return SLinkOperations.getTarget(_context.getNode(), "expression", true);
  }

  public static SNode insertMacro_Query_5853110027219951820(final IOperationContext operationContext, final TemplateQueryContextWithMacro _context) {
    Sequence.fromIterable(SNodeOperations.ofConcept(SLinkOperations.getTargets(_context.getNode(), "ressources", true), "TasksAndSyncs.structure.SyncRessourceNamed")).visitAll(new IVisitor<SNode>() {
      public void visit(final SNode it) {
        SNodeOperations.replaceWithAnother(it, new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            final SNode node_5853110027235965737 = new _FunctionTypes._return_P0_E0<SNode>() {
              public SNode invoke() {
                SNode res = SNodeOperations.copyNode(TypeChecker.getInstance().getTypeOf(SLinkOperations.getTarget(it, "expression", true)));
                return res;
              }
            }.invoke();
            final SNode node_5853110027235965746 = new _FunctionTypes._return_P0_E0<SNode>() {
              public SNode invoke() {
                SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.AbritraryTextItem", null);
                SPropertyOperations.set(res, "text", (SPropertyOperations.getString(it, "name")));
                return res;
              }
            }.invoke();
            final SNode node_5853110027235965734 = new _FunctionTypes._return_P0_E0<SNode>() {
              public SNode invoke() {
                SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.ArbitraryTextExpression", null);
                SPropertyOperations.set(res, "requiredStdHeader", (null));
                SLinkOperations.setTarget(res, "dummyType", node_5853110027235965737, true);
                ListSequence.fromList(SLinkOperations.getTargets(res, "items", true)).addElement(node_5853110027235965746);
                return res;
              }
            }.invoke();
            SNode node_5853110027235965733 = new _FunctionTypes._return_P0_E0<SNode>() {
              public SNode invoke() {
                SNode res = SConceptOperations.createNewNode("TasksAndSyncs.structure.SyncRessource", null);
                SLinkOperations.setTarget(res, "expression", node_5853110027235965734, true);
                return res;
              }
            }.invoke();
            return node_5853110027235965733;
          }
        }.invoke());
      }
    });
    return _context.getNode();
  }

  public static SNode insertMacro_Query_5853110027234446672(final IOperationContext operationContext, final TemplateQueryContextWithMacro _context) {
    return SNodeOperations.copyNode(TypeChecker.getInstance().getTypeOf(SLinkOperations.getTarget(_context.getNode(), "expression", true)));
  }

  public static SNode insertMacro_Query_5853110027234446684(final IOperationContext operationContext, final TemplateQueryContextWithMacro _context) {
    return SLinkOperations.getTarget(_context.getNode(), "expression", true);
  }

  public static SNode insertMacro_Query_5853110027234446719(final IOperationContext operationContext, final TemplateQueryContextWithMacro _context) {
    Sequence.fromIterable(SNodeOperations.ofConcept(SLinkOperations.getTargets(_context.getNode(), "ressources", true), "TasksAndSyncs.structure.SyncRessourceNamed")).visitAll(new IVisitor<SNode>() {
      public void visit(final SNode it) {
        SNodeOperations.replaceWithAnother(it, new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            final SNode node_5853110027235965789 = new _FunctionTypes._return_P0_E0<SNode>() {
              public SNode invoke() {
                SNode res = SNodeOperations.copyNode(TypeChecker.getInstance().getTypeOf(SLinkOperations.getTarget(it, "expression", true)));
                return res;
              }
            }.invoke();
            final SNode node_5853110027235965798 = new _FunctionTypes._return_P0_E0<SNode>() {
              public SNode invoke() {
                SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.AbritraryTextItem", null);
                SPropertyOperations.set(res, "text", (SPropertyOperations.getString(it, "name")));
                return res;
              }
            }.invoke();
            final SNode node_5853110027235965786 = new _FunctionTypes._return_P0_E0<SNode>() {
              public SNode invoke() {
                SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.ArbitraryTextExpression", null);
                SPropertyOperations.set(res, "requiredStdHeader", (null));
                SLinkOperations.setTarget(res, "dummyType", node_5853110027235965789, true);
                ListSequence.fromList(SLinkOperations.getTargets(res, "items", true)).addElement(node_5853110027235965798);
                return res;
              }
            }.invoke();
            SNode node_5853110027235965785 = new _FunctionTypes._return_P0_E0<SNode>() {
              public SNode invoke() {
                SNode res = SConceptOperations.createNewNode("TasksAndSyncs.structure.SyncRessource", null);
                SLinkOperations.setTarget(res, "expression", node_5853110027235965786, true);
                return res;
              }
            }.invoke();
            return node_5853110027235965785;
          }
        }.invoke());
      }
    });
    return _context.getNode();
  }

  public static SNode insertMacro_Query_5853110027234482304(final IOperationContext operationContext, final TemplateQueryContextWithMacro _context) {
    return SNodeOperations.copyNode(TypeChecker.getInstance().getTypeOf(SLinkOperations.getTarget(_context.getNode(), "expression", true)));
  }

  public static SNode insertMacro_Query_5853110027234482316(final IOperationContext operationContext, final TemplateQueryContextWithMacro _context) {
    return SLinkOperations.getTarget(_context.getNode(), "expression", true);
  }

  public static SNode insertMacro_Query_5853110027234490911(final IOperationContext operationContext, final TemplateQueryContextWithMacro _context) {
    Sequence.fromIterable(SNodeOperations.ofConcept(SLinkOperations.getTargets(_context.getNode(), "ressources", true), "TasksAndSyncs.structure.SyncRessourceNamed")).visitAll(new IVisitor<SNode>() {
      public void visit(final SNode it) {
        SNodeOperations.replaceWithAnother(it, new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            final SNode node_5853110027235965841 = new _FunctionTypes._return_P0_E0<SNode>() {
              public SNode invoke() {
                SNode res = SNodeOperations.copyNode(TypeChecker.getInstance().getTypeOf(SLinkOperations.getTarget(it, "expression", true)));
                return res;
              }
            }.invoke();
            final SNode node_5853110027235965850 = new _FunctionTypes._return_P0_E0<SNode>() {
              public SNode invoke() {
                SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.AbritraryTextItem", null);
                SPropertyOperations.set(res, "text", (SPropertyOperations.getString(it, "name")));
                return res;
              }
            }.invoke();
            final SNode node_5853110027235965838 = new _FunctionTypes._return_P0_E0<SNode>() {
              public SNode invoke() {
                SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.ArbitraryTextExpression", null);
                SPropertyOperations.set(res, "requiredStdHeader", (null));
                SLinkOperations.setTarget(res, "dummyType", node_5853110027235965841, true);
                ListSequence.fromList(SLinkOperations.getTargets(res, "items", true)).addElement(node_5853110027235965850);
                return res;
              }
            }.invoke();
            SNode node_5853110027235965837 = new _FunctionTypes._return_P0_E0<SNode>() {
              public SNode invoke() {
                SNode res = SConceptOperations.createNewNode("TasksAndSyncs.structure.SyncRessource", null);
                SLinkOperations.setTarget(res, "expression", node_5853110027235965838, true);
                return res;
              }
            }.invoke();
            return node_5853110027235965837;
          }
        }.invoke());
      }
    });
    return _context.getNode();
  }

  public static SNode insertMacro_Query_5853110027223894403(final IOperationContext operationContext, final TemplateQueryContextWithMacro _context) {
    return SNodeOperations.copyNode(TypeChecker.getInstance().getTypeOf(SLinkOperations.getTarget(SLinkOperations.getTarget(_context.getNode(), "syncRessource", false), "expression", true)));
  }

  public static SNode insertMacro_Query_5514347295282597991(final IOperationContext operationContext, final TemplateQueryContextWithMacro _context) {
    return SNodeOperations.copyNode(SLinkOperations.getTarget(SNodeOperations.cast(TypeChecker.getInstance().getTypeOf(_context.getNode()), "TasksAndSyncs.structure.TaskType"), "returnType", true));
  }

  public static SNode insertMacro_Query_5514347295282624061(final IOperationContext operationContext, final TemplateQueryContextWithMacro _context) {
    return SNodeOperations.copyNode(SLinkOperations.getTarget(SNodeOperations.cast(SLinkOperations.getTarget(SNodeOperations.cast(TypeChecker.getInstance().getTypeOf(_context.getNode()), "TasksAndSyncs.structure.TaskType"), "returnType", true), "com.mbeddr.core.pointers.structure.PointerType"), "baseType", true));
  }

  public static SNode insertMacro_Query_5514347295283030968(final IOperationContext operationContext, final TemplateQueryContextWithMacro _context) {
    return SNodeOperations.copyNode(SLinkOperations.getTarget(SNodeOperations.cast(TypeChecker.getInstance().getTypeOf(_context.getNode()), "TasksAndSyncs.structure.TaskType"), "returnType", true));
  }

  public static SNode insertMacro_Query_3074299910027075177(final IOperationContext operationContext, final TemplateQueryContextWithMacro _context) {
    return SLinkOperations.getTarget(_context.getNode(), "expression", true);
  }

  public static SNode insertMacro_Query_482600553440749830(final IOperationContext operationContext, final TemplateQueryContextWithMacro _context) {
    return SLinkOperations.getTarget(_context.getNode(), "expression", true);
  }
}
