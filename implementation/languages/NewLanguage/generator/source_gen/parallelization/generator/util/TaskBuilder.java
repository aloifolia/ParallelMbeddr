package parallelization.generator.util;

/*Generated by MPS */

import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.baseLanguage.closures.runtime._FunctionTypes;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SConceptOperations;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import jetbrains.mps.baseLanguage.closures.runtime.Wrappers;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SPropertyOperations;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import com.mbeddr.core.udt.behavior.SUDeclaration_Behavior;
import jetbrains.mps.internal.collections.runtime.IWhereFilter;
import java.util.List;
import java.util.ArrayList;
import jetbrains.mps.internal.collections.runtime.IVisitor;
import jetbrains.mps.smodel.behaviour.BehaviorReflection;

public class TaskBuilder {


  public static SNode buildTaskStruct(boolean isVoid, final String name) {
    final SNode voidPointerType = new _FunctionTypes._return_P0_E0<SNode>() {
      public SNode invoke() {
        final SNode node_6079605392878743740 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.expressions.structure.VoidType", null);
            return res;
          }
        }.invoke();
        SNode node_6079605392878743626 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.pointers.structure.PointerType", null);
            SLinkOperations.setTarget(res, "baseType", node_6079605392878743740, true);
            return res;
          }
        }.invoke();
        return node_6079605392878743626;
      }
    }.invoke();

    final Wrappers._T<SNode> returnType = new Wrappers._T<SNode>();

    if (isVoid) {
      returnType.value = SConceptOperations.createNewNode("com.mbeddr.core.expressions.structure.VoidType", null);
    } else {
      returnType.value = SNodeOperations.copyNode(voidPointerType);
    }

    // task struct with arguments and function pointer 
    final SNode argsMember = new _FunctionTypes._return_P0_E0<SNode>() {
      public SNode invoke() {
        final SNode node_8073526852157551467 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SNodeOperations.copyNode(voidPointerType);
            return res;
          }
        }.invoke();
        SNode node_8073526852157551309 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.udt.structure.Member", null);
            SPropertyOperations.set(res, "name", ("args"));
            SLinkOperations.setTarget(res, "type", node_8073526852157551467, true);
            return res;
          }
        }.invoke();
        return node_8073526852157551309;
      }
    }.invoke();
    final SNode funMember = new _FunctionTypes._return_P0_E0<SNode>() {
      public SNode invoke() {
        final SNode node_8073526852157565626 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SNodeOperations.copyNode(voidPointerType);
            return res;
          }
        }.invoke();
        final SNode node_8073526852157565631 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = returnType.value;
            return res;
          }
        }.invoke();
        final SNode node_8073526852157565625 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.modules.structure.FunctionRefType", null);
            SLinkOperations.setTarget(res, "returnType", node_8073526852157565631, true);
            ListSequence.fromList(SLinkOperations.getTargets(res, "argTypes", true)).addElement(node_8073526852157565626);
            return res;
          }
        }.invoke();
        SNode node_8073526852157553449 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.udt.structure.Member", null);
            SPropertyOperations.set(res, "name", ("fun"));
            SLinkOperations.setTarget(res, "type", node_8073526852157565625, true);
            return res;
          }
        }.invoke();
        return node_8073526852157553449;
      }
    }.invoke();
    final SNode argsSizeMember = new _FunctionTypes._return_P0_E0<SNode>() {
      public SNode invoke() {
        final SNode node_8001979070748097369 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.expressions.structure.SizeT", null);
            return res;
          }
        }.invoke();
        SNode node_8001979070748097366 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.udt.structure.Member", null);
            SPropertyOperations.set(res, "name", ("argsSize"));
            SLinkOperations.setTarget(res, "type", node_8001979070748097369, true);
            return res;
          }
        }.invoke();
        return node_8001979070748097366;
      }
    }.invoke();
    SNode taskStruct = new _FunctionTypes._return_P0_E0<SNode>() {
      public SNode invoke() {
        final SNode node_8073526852157571034 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = argsMember;
            return res;
          }
        }.invoke();
        final SNode node_8073526852157572265 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = funMember;
            return res;
          }
        }.invoke();
        final SNode node_8001979070748096698 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = argsSizeMember;
            return res;
          }
        }.invoke();
        SNode node_3074299910032666692 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.udt.structure.StructDeclaration", null);
            SPropertyOperations.set(res, "name", (name));
            SPropertyOperations.set(res, "exported", "" + ((true)));
            ListSequence.fromList(SLinkOperations.getTargets(res, "members", true)).addElement(node_8073526852157571034);
            ListSequence.fromList(SLinkOperations.getTargets(res, "members", true)).addElement(node_8073526852157572265);
            ListSequence.fromList(SLinkOperations.getTargets(res, "members", true)).addElement(node_8001979070748096698);
            return res;
          }
        }.invoke();
        return node_3074299910032666692;
      }
    }.invoke();

    return taskStruct;
  }



  public static SNode buildFutureStruct(boolean isVoid, final String name) {
    SNode futureStruct = new _FunctionTypes._return_P0_E0<SNode>() {
      public SNode invoke() {
        final SNode node_482600553440675156 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.AbritraryTextItem", null);
            SPropertyOperations.set(res, "text", ("pthread_t"));
            return res;
          }
        }.invoke();
        final SNode node_969505516143811068 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.expressions.structure.VoidType", null);
            return res;
          }
        }.invoke();
        final SNode node_482600553440675153 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.ArbitraryTextType", null);
            SPropertyOperations.set(res, "requiredStdHeader", ("<pthread.h>"));
            SLinkOperations.setTarget(res, "dummyType", node_969505516143811068, true);
            ListSequence.fromList(SLinkOperations.getTargets(res, "items", true)).addElement(node_482600553440675156);
            return res;
          }
        }.invoke();
        final SNode node_482600553440675150 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.udt.structure.Member", null);
            SPropertyOperations.set(res, "name", ("pth"));
            SLinkOperations.setTarget(res, "type", node_482600553440675153, true);
            return res;
          }
        }.invoke();
        final SNode node_482600553440675173 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.expressions.structure.BooleanType", null);
            return res;
          }
        }.invoke();
        final SNode node_482600553440675170 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.udt.structure.Member", null);
            SPropertyOperations.set(res, "name", ("finished"));
            SLinkOperations.setTarget(res, "type", node_482600553440675173, true);
            return res;
          }
        }.invoke();
        SNode node_482600553440675145 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.udt.structure.StructDeclaration", null);
            SPropertyOperations.set(res, "exported", "" + ((true)));
            SPropertyOperations.set(res, "name", (name));
            ListSequence.fromList(SLinkOperations.getTargets(res, "members", true)).addElement(node_482600553440675150);
            ListSequence.fromList(SLinkOperations.getTargets(res, "members", true)).addElement(node_482600553440675170);
            return res;
          }
        }.invoke();
        return node_482600553440675145;
      }
    }.invoke();

    if (!(isVoid)) {
      ListSequence.fromList(SLinkOperations.getTargets(futureStruct, "members", true)).addElement(new _FunctionTypes._return_P0_E0<SNode>() {
        public SNode invoke() {
          final SNode node_5267241343319432501 = new _FunctionTypes._return_P0_E0<SNode>() {
            public SNode invoke() {
              SNode res = SConceptOperations.createNewNode("com.mbeddr.core.expressions.structure.VoidType", null);
              return res;
            }
          }.invoke();
          final SNode node_5267241343319432500 = new _FunctionTypes._return_P0_E0<SNode>() {
            public SNode invoke() {
              SNode res = SConceptOperations.createNewNode("com.mbeddr.core.pointers.structure.PointerType", null);
              SLinkOperations.setTarget(res, "baseType", node_5267241343319432501, true);
              return res;
            }
          }.invoke();
          SNode node_5267241343319430772 = new _FunctionTypes._return_P0_E0<SNode>() {
            public SNode invoke() {
              SNode res = SConceptOperations.createNewNode("com.mbeddr.core.udt.structure.Member", null);
              SPropertyOperations.set(res, "name", ("result"));
              SLinkOperations.setTarget(res, "type", node_5267241343319432500, true);
              return res;
            }
          }.invoke();
          return node_5267241343319430772;
        }
      }.invoke());
    }

    return futureStruct;
  }



  public static SNode buildFutureFunction(final SNode taskStruct, final SNode futureStruct, final String name) {
    final SNode taskArgument = new _FunctionTypes._return_P0_E0<SNode>() {
      public SNode invoke() {
        final SNode node_8073526852157303303 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.udt.structure.StructType", null);
            SLinkOperations.setTarget(res, "struct", taskStruct, false);
            return res;
          }
        }.invoke();
        SNode node_8073526852157303179 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.modules.structure.Argument", null);
            SPropertyOperations.set(res, "name", ("task"));
            SLinkOperations.setTarget(res, "type", node_8073526852157303303, true);
            return res;
          }
        }.invoke();
        return node_8073526852157303179;
      }
    }.invoke();
    final SNode pthDeclaration = new _FunctionTypes._return_P0_E0<SNode>() {
      public SNode invoke() {
        final SNode node_8073526852157352262 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.AbritraryTextItem", null);
            SPropertyOperations.set(res, "text", ("pthread_t"));
            return res;
          }
        }.invoke();
        final SNode node_969505516143818469 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.expressions.structure.VoidType", null);
            return res;
          }
        }.invoke();
        final SNode node_8073526852157338526 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.ArbitraryTextType", null);
            SPropertyOperations.set(res, "requiredStdHeader", ("<pthread.h>"));
            SLinkOperations.setTarget(res, "dummyType", node_969505516143818469, true);
            ListSequence.fromList(SLinkOperations.getTargets(res, "items", true)).addElement(node_8073526852157352262);
            return res;
          }
        }.invoke();
        SNode node_8073526852157336499 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.LocalVariableDeclaration", null);
            SPropertyOperations.set(res, "name", ("pth"));
            SLinkOperations.setTarget(res, "type", node_8073526852157338526, true);
            return res;
          }
        }.invoke();
        return node_8073526852157336499;
      }
    }.invoke();
    final SNode pthread_createNoArgsCall = new _FunctionTypes._return_P0_E0<SNode>() {
      public SNode invoke() {
        final SNode node_8073526852159213286 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.LocalVarRef", null);
            SLinkOperations.setTarget(res, "var", pthDeclaration, false);
            return res;
          }
        }.invoke();
        final SNode node_8073526852158888411 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.pointers.structure.ReferenceExpr", null);
            SLinkOperations.setTarget(res, "expression", node_8073526852159213286, true);
            return res;
          }
        }.invoke();
        final SNode node_8073526852158888415 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.pointers.structure.NullExpression", null);
            return res;
          }
        }.invoke();
        final SNode node_8073526852158888418 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.modules.structure.ArgumentRef", null);
            SLinkOperations.setTarget(res, "arg", taskArgument, false);
            return res;
          }
        }.invoke();
        final SNode node_8073526852158888421 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.udt.structure.GenericMemberRef", null);
            SLinkOperations.setTarget(res, "member", ListSequence.fromList(SUDeclaration_Behavior.call_members_9101132143318613823(taskStruct)).findFirst(new IWhereFilter<SNode>() {
              public boolean accept(SNode it) {
                return SPropertyOperations.getString(it, "name").equals("fun");
              }
            }), false);
            return res;
          }
        }.invoke();
        final SNode node_8073526852158888417 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.expressions.structure.GenericDotExpression", null);
            SLinkOperations.setTarget(res, "expression", node_8073526852158888418, true);
            SLinkOperations.setTarget(res, "target", node_8073526852158888421, true);
            return res;
          }
        }.invoke();
        final SNode node_8001979070748660538 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.pointers.structure.NullExpression", null);
            return res;
          }
        }.invoke();
        final SNode node_8073526852158882678 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.ArbitraryFunctionCall", null);
            SPropertyOperations.set(res, "requiredStdHeader", ("<pthread.h>"));
            SPropertyOperations.set(res, "calledFunctionName", ("pthread_create"));
            ListSequence.fromList(SLinkOperations.getTargets(res, "arguments", true)).addElement(node_8073526852158888411);
            ListSequence.fromList(SLinkOperations.getTargets(res, "arguments", true)).addElement(node_8073526852158888415);
            ListSequence.fromList(SLinkOperations.getTargets(res, "arguments", true)).addElement(node_8073526852158888417);
            ListSequence.fromList(SLinkOperations.getTargets(res, "arguments", true)).addElement(node_8001979070748660538);
            return res;
          }
        }.invoke();
        SNode node_8073526852158877888 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.ExpressionStatement", null);
            SLinkOperations.setTarget(res, "expr", node_8073526852158882678, true);
            return res;
          }
        }.invoke();
        return node_8073526852158877888;
      }
    }.invoke();
    final SNode newArgsDeclaration = new _FunctionTypes._return_P0_E0<SNode>() {
      public SNode invoke() {
        final SNode node_8001979070748705181 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.expressions.structure.VoidType", null);
            return res;
          }
        }.invoke();
        final SNode node_8001979070748701677 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.pointers.structure.PointerType", null);
            SLinkOperations.setTarget(res, "baseType", node_8001979070748705181, true);
            return res;
          }
        }.invoke();
        final SNode node_8001979070748723926 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("jetbrains.mps.baseLanguage.structure.VoidType", null);
            return res;
          }
        }.invoke();
        final SNode node_8001979070748723925 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.pointers.structure.PointerType", null);
            SLinkOperations.setTarget(res, "baseType", node_8001979070748723926, true);
            return res;
          }
        }.invoke();
        final SNode node_8001979070748863839 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.modules.structure.ArgumentRef", null);
            SLinkOperations.setTarget(res, "arg", taskArgument, false);
            return res;
          }
        }.invoke();
        final SNode node_8001979070748863843 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.udt.structure.GenericMemberRef", null);
            SLinkOperations.setTarget(res, "member", ListSequence.fromList(SUDeclaration_Behavior.call_members_9101132143318613823(taskStruct)).findFirst(new IWhereFilter<SNode>() {
              public boolean accept(SNode it) {
                return SPropertyOperations.getString(it, "name").equals("argsSize");
              }
            }), false);
            return res;
          }
        }.invoke();
        final SNode node_8001979070748861159 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.expressions.structure.GenericDotExpression", null);
            SLinkOperations.setTarget(res, "expression", node_8001979070748863839, true);
            SLinkOperations.setTarget(res, "target", node_8001979070748863843, true);
            return res;
          }
        }.invoke();
        final SNode node_8001979070748723590 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.ArbitraryFunctionCall", null);
            SPropertyOperations.set(res, "requiredStdHeader", ("<stdlib.h>"));
            SPropertyOperations.set(res, "calledFunctionName", ("malloc"));
            SLinkOperations.setTarget(res, "dummyType", node_8001979070748723925, true);
            ListSequence.fromList(SLinkOperations.getTargets(res, "arguments", true)).addElement(node_8001979070748861159);
            return res;
          }
        }.invoke();
        SNode node_8001979070748701451 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.LocalVariableDeclaration", null);
            SPropertyOperations.set(res, "name", ("args"));
            SLinkOperations.setTarget(res, "type", node_8001979070748701677, true);
            SLinkOperations.setTarget(res, "init", node_8001979070748723590, true);
            return res;
          }
        }.invoke();
        return node_8001979070748701451;
      }
    }.invoke();
    final SNode newArgsInit = new _FunctionTypes._return_P0_E0<SNode>() {
      public SNode invoke() {
        final SNode node_8001979070748819450 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.LocalVarRef", null);
            SLinkOperations.setTarget(res, "var", newArgsDeclaration, false);
            return res;
          }
        }.invoke();
        final SNode node_8001979070748882496 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.modules.structure.ArgumentRef", null);
            SLinkOperations.setTarget(res, "arg", taskArgument, false);
            return res;
          }
        }.invoke();
        final SNode node_8001979070748882500 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.udt.structure.GenericMemberRef", null);
            SLinkOperations.setTarget(res, "member", ListSequence.fromList(SUDeclaration_Behavior.call_members_9101132143318613823(taskStruct)).findFirst(new IWhereFilter<SNode>() {
              public boolean accept(SNode it) {
                return SPropertyOperations.getString(it, "name").equals("args");
              }
            }), false);
            return res;
          }
        }.invoke();
        final SNode node_8001979070748830598 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.expressions.structure.GenericDotExpression", null);
            SLinkOperations.setTarget(res, "expression", node_8001979070748882496, true);
            SLinkOperations.setTarget(res, "target", node_8001979070748882500, true);
            return res;
          }
        }.invoke();
        final SNode node_8001979070756328408 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.modules.structure.ArgumentRef", null);
            SLinkOperations.setTarget(res, "arg", taskArgument, false);
            return res;
          }
        }.invoke();
        final SNode node_8001979070756328412 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.udt.structure.GenericMemberRef", null);
            SLinkOperations.setTarget(res, "member", ListSequence.fromList(SUDeclaration_Behavior.call_members_9101132143318613823(taskStruct)).findFirst(new IWhereFilter<SNode>() {
              public boolean accept(SNode it) {
                return SPropertyOperations.getString(it, "name").equals("argsSize");
              }
            }), false);
            return res;
          }
        }.invoke();
        final SNode node_8001979070756328407 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.expressions.structure.GenericDotExpression", null);
            SLinkOperations.setTarget(res, "expression", node_8001979070756328408, true);
            SLinkOperations.setTarget(res, "target", node_8001979070756328412, true);
            return res;
          }
        }.invoke();
        final SNode node_8001979070748823082 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.ArbitraryFunctionCall", null);
            SPropertyOperations.set(res, "requiredStdHeader", ("<string.h>"));
            SPropertyOperations.set(res, "calledFunctionName", ("memcpy"));
            ListSequence.fromList(SLinkOperations.getTargets(res, "arguments", true)).addElement(node_8001979070748819450);
            ListSequence.fromList(SLinkOperations.getTargets(res, "arguments", true)).addElement(node_8001979070748830598);
            ListSequence.fromList(SLinkOperations.getTargets(res, "arguments", true)).addElement(node_8001979070756328407);
            return res;
          }
        }.invoke();
        SNode node_8001979070748804335 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.ExpressionStatement", null);
            SLinkOperations.setTarget(res, "expr", node_8001979070748823082, true);
            return res;
          }
        }.invoke();
        return node_8001979070748804335;
      }
    }.invoke();
    final SNode pthread_createArgsCall = new _FunctionTypes._return_P0_E0<SNode>() {
      public SNode invoke() {
        final SNode node_8001979070748673504 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.LocalVarRef", null);
            SLinkOperations.setTarget(res, "var", pthDeclaration, false);
            return res;
          }
        }.invoke();
        final SNode node_8001979070748673503 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.pointers.structure.ReferenceExpr", null);
            SLinkOperations.setTarget(res, "expression", node_8001979070748673504, true);
            return res;
          }
        }.invoke();
        final SNode node_8001979070748673509 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.pointers.structure.NullExpression", null);
            return res;
          }
        }.invoke();
        final SNode node_8001979070748673512 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.modules.structure.ArgumentRef", null);
            SLinkOperations.setTarget(res, "arg", taskArgument, false);
            return res;
          }
        }.invoke();
        final SNode node_8001979070748673516 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.udt.structure.GenericMemberRef", null);
            SLinkOperations.setTarget(res, "member", ListSequence.fromList(SUDeclaration_Behavior.call_members_9101132143318613823(taskStruct)).findFirst(new IWhereFilter<SNode>() {
              public boolean accept(SNode it) {
                return SPropertyOperations.getString(it, "name").equals("fun");
              }
            }), false);
            return res;
          }
        }.invoke();
        final SNode node_8001979070748673511 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.expressions.structure.GenericDotExpression", null);
            SLinkOperations.setTarget(res, "expression", node_8001979070748673512, true);
            SLinkOperations.setTarget(res, "target", node_8001979070748673516, true);
            return res;
          }
        }.invoke();
        final SNode node_8001979070748673536 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.LocalVarRef", null);
            SLinkOperations.setTarget(res, "var", newArgsDeclaration, false);
            return res;
          }
        }.invoke();
        final SNode node_8001979070748673498 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.ArbitraryFunctionCall", null);
            SPropertyOperations.set(res, "requiredStdHeader", ("<pthread.h>"));
            SPropertyOperations.set(res, "calledFunctionName", ("pthread_create"));
            ListSequence.fromList(SLinkOperations.getTargets(res, "arguments", true)).addElement(node_8001979070748673503);
            ListSequence.fromList(SLinkOperations.getTargets(res, "arguments", true)).addElement(node_8001979070748673509);
            ListSequence.fromList(SLinkOperations.getTargets(res, "arguments", true)).addElement(node_8001979070748673511);
            ListSequence.fromList(SLinkOperations.getTargets(res, "arguments", true)).addElement(node_8001979070748673536);
            return res;
          }
        }.invoke();
        SNode node_8001979070748673497 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.ExpressionStatement", null);
            SLinkOperations.setTarget(res, "expr", node_8001979070748673498, true);
            return res;
          }
        }.invoke();
        return node_8001979070748673497;
      }
    }.invoke();
    final SNode conditionalPthreadInit = new _FunctionTypes._return_P0_E0<SNode>() {
      public SNode invoke() {
        final SNode node_8001979070748550169 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.modules.structure.ArgumentRef", null);
            SLinkOperations.setTarget(res, "arg", taskArgument, false);
            return res;
          }
        }.invoke();
        final SNode node_8001979070748550173 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.udt.structure.GenericMemberRef", null);
            SLinkOperations.setTarget(res, "member", ListSequence.fromList(SUDeclaration_Behavior.call_members_9101132143318613823(taskStruct)).findFirst(new IWhereFilter<SNode>() {
              public boolean accept(SNode it) {
                return SPropertyOperations.getString(it, "name").equals("argsSize");
              }
            }), false);
            return res;
          }
        }.invoke();
        final SNode node_8001979070748546475 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.expressions.structure.GenericDotExpression", null);
            SLinkOperations.setTarget(res, "expression", node_8001979070748550169, true);
            SLinkOperations.setTarget(res, "target", node_8001979070748550173, true);
            return res;
          }
        }.invoke();
        final SNode node_8001979070748611313 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.expressions.structure.NumberLiteral", null);
            SPropertyOperations.set(res, "value", ("0"));
            return res;
          }
        }.invoke();
        final SNode node_8001979070748543040 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.expressions.structure.EqualsExpression", null);
            SLinkOperations.setTarget(res, "left", node_8001979070748546475, true);
            SLinkOperations.setTarget(res, "right", node_8001979070748611313, true);
            return res;
          }
        }.invoke();
        final SNode node_8001979070748625510 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = pthread_createNoArgsCall;
            return res;
          }
        }.invoke();
        final SNode node_8001979070748619696 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.StatementList", null);
            ListSequence.fromList(SLinkOperations.getTargets(res, "statements", true)).addElement(node_8001979070748625510);
            return res;
          }
        }.invoke();
        final SNode node_8001979070748927102 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = newArgsDeclaration;
            return res;
          }
        }.invoke();
        final SNode node_8001979070748927361 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = newArgsInit;
            return res;
          }
        }.invoke();
        final SNode node_8001979070748927579 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = pthread_createArgsCall;
            return res;
          }
        }.invoke();
        final SNode node_8001979070748924526 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.StatementList", null);
            ListSequence.fromList(SLinkOperations.getTargets(res, "statements", true)).addElement(node_8001979070748927102);
            ListSequence.fromList(SLinkOperations.getTargets(res, "statements", true)).addElement(node_8001979070748927361);
            ListSequence.fromList(SLinkOperations.getTargets(res, "statements", true)).addElement(node_8001979070748927579);
            return res;
          }
        }.invoke();
        SNode node_8001979070748539544 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.IfStatement", null);
            SLinkOperations.setTarget(res, "condition", node_8001979070748543040, true);
            SLinkOperations.setTarget(res, "thenPart", node_8001979070748619696, true);
            SLinkOperations.setTarget(res, "elsePart", node_8001979070748924526, true);
            return res;
          }
        }.invoke();
        return node_8001979070748539544;
      }
    }.invoke();
    final SNode returnStatement = new _FunctionTypes._return_P0_E0<SNode>() {
      public SNode invoke() {
        final SNode node_8073526852158916543 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.AbritraryTextItem", null);
            SPropertyOperations.set(res, "text", ("("));
            return res;
          }
        }.invoke();
        final SNode node_4390787788464608864 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.udt.structure.StructType", null);
            SLinkOperations.setTarget(res, "struct", futureStruct, false);
            return res;
          }
        }.invoke();
        final SNode node_4390787788464608282 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.AnyNodeItem", null);
            SLinkOperations.setTarget(res, "theNode", node_4390787788464608864, true);
            return res;
          }
        }.invoke();
        final SNode node_4390787788464611571 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.AbritraryTextItem", null);
            SPropertyOperations.set(res, "text", ("){ .pth = pth }"));
            return res;
          }
        }.invoke();
        final SNode node_8073526852158916551 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.udt.structure.StructType", null);
            SLinkOperations.setTarget(res, "struct", futureStruct, false);
            return res;
          }
        }.invoke();
        final SNode node_8073526852158914186 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.ArbitraryTextExpression", null);
            SPropertyOperations.set(res, "requiredStdHeader", (null));
            SLinkOperations.setTarget(res, "dummyType", node_8073526852158916551, true);
            ListSequence.fromList(SLinkOperations.getTargets(res, "items", true)).addElement(node_8073526852158916543);
            ListSequence.fromList(SLinkOperations.getTargets(res, "items", true)).addElement(node_4390787788464608282);
            ListSequence.fromList(SLinkOperations.getTargets(res, "items", true)).addElement(node_4390787788464611571);
            return res;
          }
        }.invoke();
        SNode node_8073526852157680445 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.modules.structure.ReturnStatement", null);
            SLinkOperations.setTarget(res, "expression", node_8073526852158914186, true);
            return res;
          }
        }.invoke();
        return node_8073526852157680445;
      }
    }.invoke();
    SNode futureFunction = new _FunctionTypes._return_P0_E0<SNode>() {
      public SNode invoke() {
        final SNode node_8073526852157672150 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.udt.structure.StructType", null);
            SLinkOperations.setTarget(res, "struct", futureStruct, false);
            return res;
          }
        }.invoke();
        final SNode node_8073526852157183898 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = taskArgument;
            return res;
          }
        }.invoke();
        final SNode node_8073526852157307666 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = pthDeclaration;
            return res;
          }
        }.invoke();
        final SNode node_8073526852159484408 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = conditionalPthreadInit;
            return res;
          }
        }.invoke();
        final SNode node_8073526852159484533 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = returnStatement;
            return res;
          }
        }.invoke();
        final SNode node_8073526852157307383 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.StatementList", null);
            ListSequence.fromList(SLinkOperations.getTargets(res, "statements", true)).addElement(node_8073526852157307666);
            ListSequence.fromList(SLinkOperations.getTargets(res, "statements", true)).addElement(node_8073526852159484408);
            ListSequence.fromList(SLinkOperations.getTargets(res, "statements", true)).addElement(node_8073526852159484533);
            return res;
          }
        }.invoke();
        SNode node_8073526852157180001 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.modules.structure.Function", null);
            SPropertyOperations.set(res, "inline", "" + ((false)));
            SPropertyOperations.set(res, "exported", "" + ((true)));
            SPropertyOperations.set(res, "name", (name));
            SPropertyOperations.set(res, "overriddenCodeLocation", (""));
            SPropertyOperations.set(res, "contextNodeId", (""));
            SPropertyOperations.set(res, "contextModelId", (""));
            SPropertyOperations.set(res, "__inlinetext", (""));
            SLinkOperations.setTarget(res, "type", node_8073526852157672150, true);
            SLinkOperations.setTarget(res, "body", node_8073526852157307383, true);
            ListSequence.fromList(SLinkOperations.getTargets(res, "arguments", true)).addElement(node_8073526852157183898);
            return res;
          }
        }.invoke();
        return node_8073526852157180001;
      }
    }.invoke();

    return futureFunction;
  }



  public static SNode buildFutureJoinFunction(final SNode futureStruct, final String name) {
    final SNode futureArgument = new _FunctionTypes._return_P0_E0<SNode>() {
      public SNode invoke() {
        final SNode node_4390787788469319494 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.udt.structure.StructType", null);
            SLinkOperations.setTarget(res, "struct", futureStruct, false);
            return res;
          }
        }.invoke();
        final SNode node_4390787788469319493 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.pointers.structure.PointerType", null);
            SLinkOperations.setTarget(res, "baseType", node_4390787788469319494, true);
            return res;
          }
        }.invoke();
        SNode node_4390787788465667791 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.modules.structure.Argument", null);
            SPropertyOperations.set(res, "name", ("future"));
            SLinkOperations.setTarget(res, "type", node_4390787788469319493, true);
            return res;
          }
        }.invoke();
        return node_4390787788465667791;
      }
    }.invoke();

    SNode futureJoinFunction = new _FunctionTypes._return_P0_E0<SNode>() {
      public SNode invoke() {
        final SNode node_4390787788465441149 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.expressions.structure.VoidType", null);
            return res;
          }
        }.invoke();
        final SNode node_4390787788465441155 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = futureArgument;
            return res;
          }
        }.invoke();
        final SNode node_4390787788465761161 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = futureArgument;
            return res;
          }
        }.invoke();
        final SNode node_4390787788465797437 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.modules.structure.ArgumentRef", null);
            SLinkOperations.setTarget(res, "arg", futureArgument, false);
            return res;
          }
        }.invoke();
        final SNode node_4390787788465797861 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.udt.structure.GenericMemberRef", null);
            SLinkOperations.setTarget(res, "member", ListSequence.fromList(SUDeclaration_Behavior.call_members_9101132143318613823(futureStruct)).findFirst(new IWhereFilter<SNode>() {
              public boolean accept(SNode it) {
                return SPropertyOperations.getString(it, "name").equals("finished");
              }
            }), false);
            return res;
          }
        }.invoke();
        final SNode node_4390787788465788525 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.expressions.structure.GenericDotExpression", null);
            SLinkOperations.setTarget(res, "expression", node_4390787788465797437, true);
            SLinkOperations.setTarget(res, "target", node_4390787788465797861, true);
            return res;
          }
        }.invoke();
        final SNode node_4390787788465777882 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.expressions.structure.NotExpression", null);
            SLinkOperations.setTarget(res, "expression", node_4390787788465788525, true);
            return res;
          }
        }.invoke();
        final SNode node_1186028049354472248 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.modules.structure.ArgumentRef", null);
            SLinkOperations.setTarget(res, "arg", futureArgument, false);
            return res;
          }
        }.invoke();
        final SNode node_1186028049354472252 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.udt.structure.GenericMemberRef", null);
            SLinkOperations.setTarget(res, "member", ListSequence.fromList(SUDeclaration_Behavior.call_members_9101132143318613823(futureStruct)).findFirst(new IWhereFilter<SNode>() {
              public boolean accept(SNode it) {
                return SPropertyOperations.getString(it, "name").equals("pth");
              }
            }), false);
            return res;
          }
        }.invoke();
        final SNode node_1186028049354469688 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.expressions.structure.GenericDotExpression", null);
            SLinkOperations.setTarget(res, "expression", node_1186028049354472248, true);
            SLinkOperations.setTarget(res, "target", node_1186028049354472252, true);
            return res;
          }
        }.invoke();
        final SNode node_4390787788466005500 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.pointers.structure.NullExpression", null);
            return res;
          }
        }.invoke();
        final SNode node_4390787788465987961 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.ArbitraryFunctionCall", null);
            SPropertyOperations.set(res, "requiredStdHeader", ("<pthread.h>"));
            SPropertyOperations.set(res, "calledFunctionName", ("pthread_join"));
            ListSequence.fromList(SLinkOperations.getTargets(res, "arguments", true)).addElement(node_1186028049354469688);
            ListSequence.fromList(SLinkOperations.getTargets(res, "arguments", true)).addElement(node_4390787788466005500);
            return res;
          }
        }.invoke();
        final SNode node_4390787788465975414 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.ExpressionStatement", null);
            SLinkOperations.setTarget(res, "expr", node_4390787788465987961, true);
            return res;
          }
        }.invoke();
        final SNode node_4390787788466121299 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.modules.structure.ArgumentRef", null);
            SLinkOperations.setTarget(res, "arg", futureArgument, false);
            return res;
          }
        }.invoke();
        final SNode node_4390787788466121303 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.udt.structure.GenericMemberRef", null);
            SLinkOperations.setTarget(res, "member", ListSequence.fromList(SUDeclaration_Behavior.call_members_9101132143318613823(futureStruct)).findFirst(new IWhereFilter<SNode>() {
              public boolean accept(SNode it) {
                return SPropertyOperations.getString(it, "name").equals("finished");
              }
            }), false);
            return res;
          }
        }.invoke();
        final SNode node_4390787788466121167 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.expressions.structure.GenericDotExpression", null);
            SLinkOperations.setTarget(res, "expression", node_4390787788466121299, true);
            SLinkOperations.setTarget(res, "target", node_4390787788466121303, true);
            return res;
          }
        }.invoke();
        final SNode node_4390787788466146490 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.expressions.structure.TrueLiteral", null);
            return res;
          }
        }.invoke();
        final SNode node_4390787788466120979 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.expressions.structure.AssignmentExpr", null);
            SLinkOperations.setTarget(res, "left", node_4390787788466121167, true);
            SLinkOperations.setTarget(res, "right", node_4390787788466146490, true);
            return res;
          }
        }.invoke();
        final SNode node_4390787788466118408 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.ExpressionStatement", null);
            SLinkOperations.setTarget(res, "expr", node_4390787788466120979, true);
            return res;
          }
        }.invoke();
        final SNode node_4390787788465968971 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.StatementList", null);
            ListSequence.fromList(SLinkOperations.getTargets(res, "statements", true)).addElement(node_4390787788465975414);
            ListSequence.fromList(SLinkOperations.getTargets(res, "statements", true)).addElement(node_4390787788466118408);
            return res;
          }
        }.invoke();
        final SNode node_4390787788465775728 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.IfStatement", null);
            SLinkOperations.setTarget(res, "condition", node_4390787788465777882, true);
            SLinkOperations.setTarget(res, "thenPart", node_4390787788465968971, true);
            return res;
          }
        }.invoke();
        final SNode node_4390787788465441158 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.StatementList", null);
            ListSequence.fromList(SLinkOperations.getTargets(res, "statements", true)).addElement(node_4390787788465761161);
            ListSequence.fromList(SLinkOperations.getTargets(res, "statements", true)).addElement(node_4390787788465775728);
            return res;
          }
        }.invoke();
        SNode node_4390787788465438996 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.modules.structure.Function", null);
            SPropertyOperations.set(res, "inline", "" + ((false)));
            SPropertyOperations.set(res, "exported", "" + ((true)));
            SPropertyOperations.set(res, "name", (name));
            SPropertyOperations.set(res, "overriddenCodeLocation", (""));
            SPropertyOperations.set(res, "contextNodeId", (""));
            SPropertyOperations.set(res, "contextModelId", (""));
            SPropertyOperations.set(res, "__inlinetext", (""));
            SLinkOperations.setTarget(res, "type", node_4390787788465441149, true);
            SLinkOperations.setTarget(res, "body", node_4390787788465441158, true);
            ListSequence.fromList(SLinkOperations.getTargets(res, "arguments", true)).addElement(node_4390787788465441155);
            return res;
          }
        }.invoke();
        return node_4390787788465438996;
      }
    }.invoke();

    return futureJoinFunction;
  }



  public static SNode buildFutureSaveAndJoinFunction(SNode futureStruct, SNode joinFutureFunction, String name) {
    SNode returnType = new _FunctionTypes._return_P0_E0<SNode>() {
      public SNode invoke() {
        SNode node_5853110027242066720 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.expressions.structure.VoidType", null);
            return res;
          }
        }.invoke();
        return node_5853110027242066720;
      }
    }.invoke();
    return buildFutureSaveAndXFunction(futureStruct, joinFutureFunction, name, returnType);
  }



  public static SNode buildFutureResultFunction(final SNode futureStruct, final String name) {
    final SNode futureArgument = new _FunctionTypes._return_P0_E0<SNode>() {
      public SNode invoke() {
        final SNode node_9181285766597005007 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.udt.structure.StructType", null);
            SLinkOperations.setTarget(res, "struct", futureStruct, false);
            return res;
          }
        }.invoke();
        final SNode node_9181285766597005006 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.pointers.structure.PointerType", null);
            SLinkOperations.setTarget(res, "baseType", node_9181285766597005007, true);
            return res;
          }
        }.invoke();
        SNode node_9181285766597005003 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.modules.structure.Argument", null);
            SPropertyOperations.set(res, "name", ("future"));
            SLinkOperations.setTarget(res, "type", node_9181285766597005006, true);
            return res;
          }
        }.invoke();
        return node_9181285766597005003;
      }
    }.invoke();

    final SNode futureResult = new _FunctionTypes._return_P0_E0<SNode>() {
      public SNode invoke() {
        final SNode node_9181285766595938003 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.modules.structure.ArgumentRef", null);
            SLinkOperations.setTarget(res, "arg", futureArgument, false);
            return res;
          }
        }.invoke();
        final SNode node_9181285766595938007 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.udt.structure.GenericMemberRef", null);
            SLinkOperations.setTarget(res, "member", ListSequence.fromList(SUDeclaration_Behavior.call_members_9101132143318613823(futureStruct)).findFirst(new IWhereFilter<SNode>() {
              public boolean accept(SNode it) {
                return SPropertyOperations.getString(it, "name").equals("result");
              }
            }), false);
            return res;
          }
        }.invoke();
        SNode node_9181285766595937812 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.expressions.structure.GenericDotExpression", null);
            SLinkOperations.setTarget(res, "expression", node_9181285766595938003, true);
            SLinkOperations.setTarget(res, "target", node_9181285766595938007, true);
            return res;
          }
        }.invoke();
        return node_9181285766595937812;
      }
    }.invoke();

    SNode futureJoinFunction = new _FunctionTypes._return_P0_E0<SNode>() {
      public SNode invoke() {
        final SNode node_9181285766597005024 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("jetbrains.mps.baseLanguage.structure.VoidType", null);
            return res;
          }
        }.invoke();
        final SNode node_9181285766597005023 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.pointers.structure.PointerType", null);
            SLinkOperations.setTarget(res, "baseType", node_9181285766597005024, true);
            return res;
          }
        }.invoke();
        final SNode node_9181285766597005029 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = futureArgument;
            return res;
          }
        }.invoke();
        final SNode node_9181285766597005035 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.modules.structure.ArgumentRef", null);
            SLinkOperations.setTarget(res, "arg", futureArgument, false);
            return res;
          }
        }.invoke();
        final SNode node_9181285766597005039 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.udt.structure.GenericMemberRef", null);
            SLinkOperations.setTarget(res, "member", ListSequence.fromList(SUDeclaration_Behavior.call_members_9101132143318613823(futureStruct)).findFirst(new IWhereFilter<SNode>() {
              public boolean accept(SNode it) {
                return SPropertyOperations.getString(it, "name").equals("finished");
              }
            }), false);
            return res;
          }
        }.invoke();
        final SNode node_9181285766597595039 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.expressions.structure.GenericDotExpression", null);
            SLinkOperations.setTarget(res, "expression", node_9181285766597005035, true);
            SLinkOperations.setTarget(res, "target", node_9181285766597005039, true);
            return res;
          }
        }.invoke();
        final SNode node_9181285766597559269 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.expressions.structure.NotExpression", null);
            SLinkOperations.setTarget(res, "expression", node_9181285766597595039, true);
            return res;
          }
        }.invoke();
        final SNode node_9181285766597005072 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.modules.structure.ArgumentRef", null);
            SLinkOperations.setTarget(res, "arg", futureArgument, false);
            return res;
          }
        }.invoke();
        final SNode node_9181285766597005076 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.udt.structure.GenericMemberRef", null);
            SLinkOperations.setTarget(res, "member", ListSequence.fromList(SUDeclaration_Behavior.call_members_9101132143318613823(futureStruct)).findFirst(new IWhereFilter<SNode>() {
              public boolean accept(SNode it) {
                return SPropertyOperations.getString(it, "name").equals("pth");
              }
            }), false);
            return res;
          }
        }.invoke();
        final SNode node_9181285766597005071 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.expressions.structure.GenericDotExpression", null);
            SLinkOperations.setTarget(res, "expression", node_9181285766597005072, true);
            SLinkOperations.setTarget(res, "target", node_9181285766597005076, true);
            return res;
          }
        }.invoke();
        final SNode node_9181285766597005098 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SNodeOperations.copyNode(futureResult);
            return res;
          }
        }.invoke();
        final SNode node_9181285766597005097 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.expressions.structure.ParensExpression", null);
            SLinkOperations.setTarget(res, "expression", node_9181285766597005098, true);
            return res;
          }
        }.invoke();
        final SNode node_9181285766597005096 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.pointers.structure.ReferenceExpr", null);
            SLinkOperations.setTarget(res, "expression", node_9181285766597005097, true);
            return res;
          }
        }.invoke();
        final SNode node_9181285766597005066 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.ArbitraryFunctionCall", null);
            SPropertyOperations.set(res, "requiredStdHeader", ("<pthread.h>"));
            SPropertyOperations.set(res, "calledFunctionName", ("pthread_join"));
            ListSequence.fromList(SLinkOperations.getTargets(res, "arguments", true)).addElement(node_9181285766597005071);
            ListSequence.fromList(SLinkOperations.getTargets(res, "arguments", true)).addElement(node_9181285766597005096);
            return res;
          }
        }.invoke();
        final SNode node_9181285766597005065 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.ExpressionStatement", null);
            SLinkOperations.setTarget(res, "expr", node_9181285766597005066, true);
            return res;
          }
        }.invoke();
        final SNode node_9181285766597005106 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.modules.structure.ArgumentRef", null);
            SLinkOperations.setTarget(res, "arg", futureArgument, false);
            return res;
          }
        }.invoke();
        final SNode node_9181285766597005110 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.udt.structure.GenericMemberRef", null);
            SLinkOperations.setTarget(res, "member", ListSequence.fromList(SUDeclaration_Behavior.call_members_9101132143318613823(futureStruct)).findFirst(new IWhereFilter<SNode>() {
              public boolean accept(SNode it) {
                return SPropertyOperations.getString(it, "name").equals("finished");
              }
            }), false);
            return res;
          }
        }.invoke();
        final SNode node_9181285766597005105 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.expressions.structure.GenericDotExpression", null);
            SLinkOperations.setTarget(res, "expression", node_9181285766597005106, true);
            SLinkOperations.setTarget(res, "target", node_9181285766597005110, true);
            return res;
          }
        }.invoke();
        final SNode node_9181285766597005130 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.expressions.structure.TrueLiteral", null);
            return res;
          }
        }.invoke();
        final SNode node_9181285766597005104 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.expressions.structure.AssignmentExpr", null);
            SLinkOperations.setTarget(res, "left", node_9181285766597005105, true);
            SLinkOperations.setTarget(res, "right", node_9181285766597005130, true);
            return res;
          }
        }.invoke();
        final SNode node_9181285766597005103 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.ExpressionStatement", null);
            SLinkOperations.setTarget(res, "expr", node_9181285766597005104, true);
            return res;
          }
        }.invoke();
        final SNode node_9181285766597005059 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.StatementList", null);
            ListSequence.fromList(SLinkOperations.getTargets(res, "statements", true)).addElement(node_9181285766597005065);
            ListSequence.fromList(SLinkOperations.getTargets(res, "statements", true)).addElement(node_9181285766597005103);
            return res;
          }
        }.invoke();
        final SNode node_9181285766597005033 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.IfStatement", null);
            SLinkOperations.setTarget(res, "condition", node_9181285766597559269, true);
            SLinkOperations.setTarget(res, "thenPart", node_9181285766597005059, true);
            return res;
          }
        }.invoke();
        final SNode node_9181285766597005136 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.modules.structure.ArgumentRef", null);
            SLinkOperations.setTarget(res, "arg", futureArgument, false);
            return res;
          }
        }.invoke();
        final SNode node_9181285766597005140 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.udt.structure.GenericMemberRef", null);
            SLinkOperations.setTarget(res, "member", ListSequence.fromList(SUDeclaration_Behavior.call_members_9101132143318613823(futureStruct)).findFirst(new IWhereFilter<SNode>() {
              public boolean accept(SNode it) {
                return SPropertyOperations.getString(it, "name").equals("result");
              }
            }), false);
            return res;
          }
        }.invoke();
        final SNode node_9181285766597005135 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.expressions.structure.GenericDotExpression", null);
            SLinkOperations.setTarget(res, "expression", node_9181285766597005136, true);
            SLinkOperations.setTarget(res, "target", node_9181285766597005140, true);
            return res;
          }
        }.invoke();
        final SNode node_9181285766597005134 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.modules.structure.ReturnStatement", null);
            SLinkOperations.setTarget(res, "expression", node_9181285766597005135, true);
            return res;
          }
        }.invoke();
        final SNode node_9181285766597005032 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.StatementList", null);
            ListSequence.fromList(SLinkOperations.getTargets(res, "statements", true)).addElement(node_9181285766597005033);
            ListSequence.fromList(SLinkOperations.getTargets(res, "statements", true)).addElement(node_9181285766597005134);
            return res;
          }
        }.invoke();
        SNode node_9181285766597005018 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.modules.structure.Function", null);
            SPropertyOperations.set(res, "inline", "" + ((false)));
            SPropertyOperations.set(res, "exported", "" + ((true)));
            SPropertyOperations.set(res, "name", (name));
            SPropertyOperations.set(res, "overriddenCodeLocation", (""));
            SPropertyOperations.set(res, "contextNodeId", (""));
            SPropertyOperations.set(res, "contextModelId", (""));
            SPropertyOperations.set(res, "__inlinetext", (""));
            SLinkOperations.setTarget(res, "type", node_9181285766597005023, true);
            SLinkOperations.setTarget(res, "body", node_9181285766597005032, true);
            ListSequence.fromList(SLinkOperations.getTargets(res, "arguments", true)).addElement(node_9181285766597005029);
            return res;
          }
        }.invoke();
        return node_9181285766597005018;
      }
    }.invoke();

    return futureJoinFunction;
  }



  public static SNode buildFutureSaveAndResultFunction(SNode futureStruct, SNode futureResultFunction, String name) {
    SNode returnType = new _FunctionTypes._return_P0_E0<SNode>() {
      public SNode invoke() {
        final SNode node_5853110027242045247 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.expressions.structure.VoidType", null);
            return res;
          }
        }.invoke();
        SNode node_5853110027242044941 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.pointers.structure.PointerType", null);
            SLinkOperations.setTarget(res, "baseType", node_5853110027242045247, true);
            return res;
          }
        }.invoke();
        return node_5853110027242044941;
      }
    }.invoke();
    return buildFutureSaveAndXFunction(futureStruct, futureResultFunction, name, returnType);
  }



  public static SNode buildFutureSaveAndXFunction(final SNode futureStruct, final SNode futureXFunction, final String name, final SNode returnType) {
    final SNode futureArgument = new _FunctionTypes._return_P0_E0<SNode>() {
      public SNode invoke() {
        final SNode node_5853110027242023225 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.udt.structure.StructType", null);
            SLinkOperations.setTarget(res, "struct", futureStruct, false);
            return res;
          }
        }.invoke();
        SNode node_5853110027242023222 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.modules.structure.Argument", null);
            SPropertyOperations.set(res, "name", ("future"));
            SLinkOperations.setTarget(res, "type", node_5853110027242023225, true);
            return res;
          }
        }.invoke();
        return node_5853110027242023222;
      }
    }.invoke();

    SNode futureSaveAndResultFunction = new _FunctionTypes._return_P0_E0<SNode>() {
      public SNode invoke() {
        final SNode node_5853110027242023240 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = returnType;
            return res;
          }
        }.invoke();
        final SNode node_5853110027242023246 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = futureArgument;
            return res;
          }
        }.invoke();
        final SNode node_5853110027242023255 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.modules.structure.ArgumentRef", null);
            SLinkOperations.setTarget(res, "arg", futureArgument, false);
            return res;
          }
        }.invoke();
        final SNode node_5853110027242023254 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.pointers.structure.ReferenceExpr", null);
            SLinkOperations.setTarget(res, "expression", node_5853110027242023255, true);
            return res;
          }
        }.invoke();
        final SNode node_5853110027242023251 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.modules.structure.FunctionCall", null);
            ListSequence.fromList(SLinkOperations.getTargets(res, "actuals", true)).addElement(node_5853110027242023254);
            SLinkOperations.setTarget(res, "function", futureXFunction, false);
            return res;
          }
        }.invoke();
        final SNode node_5853110027242023250 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.ExpressionStatement", null);
            SLinkOperations.setTarget(res, "expr", node_5853110027242023251, true);
            return res;
          }
        }.invoke();
        final SNode node_5853110027242023249 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.statements.structure.StatementList", null);
            ListSequence.fromList(SLinkOperations.getTargets(res, "statements", true)).addElement(node_5853110027242023250);
            return res;
          }
        }.invoke();
        SNode node_5853110027242023235 = new _FunctionTypes._return_P0_E0<SNode>() {
          public SNode invoke() {
            SNode res = SConceptOperations.createNewNode("com.mbeddr.core.modules.structure.Function", null);
            SPropertyOperations.set(res, "inline", "" + ((false)));
            SPropertyOperations.set(res, "exported", "" + ((true)));
            SPropertyOperations.set(res, "name", (name));
            SPropertyOperations.set(res, "overriddenCodeLocation", (""));
            SPropertyOperations.set(res, "contextNodeId", (""));
            SPropertyOperations.set(res, "contextModelId", (""));
            SPropertyOperations.set(res, "__inlinetext", (""));
            SLinkOperations.setTarget(res, "type", node_5853110027242023240, true);
            SLinkOperations.setTarget(res, "body", node_5853110027242023249, true);
            ListSequence.fromList(SLinkOperations.getTargets(res, "arguments", true)).addElement(node_5853110027242023246);
            return res;
          }
        }.invoke();
        return node_5853110027242023235;
      }
    }.invoke();

    return futureSaveAndResultFunction;
  }



  public static List<SNode> getIVarRefsFromTaskExpr(SNode node) {
    final List<SNode> varRefs = new ArrayList<SNode>();
    ListSequence.fromList(SNodeOperations.getDescendants(node, "com.mbeddr.core.statements.structure.IVariableReference", false, new String[]{})).where(new IWhereFilter<SNode>() {
      public boolean accept(SNode it) {
        return !(SNodeOperations.isInstanceOf(it, "com.mbeddr.core.modules.structure.GlobalVarRef"));
      }
    }).visitAll(new IVisitor<SNode>() {
      public void visit(final SNode currentRef) {
        if (!(ListSequence.fromList(varRefs).any(new IWhereFilter<SNode>() {
          public boolean accept(SNode existingRef) {
            return BehaviorReflection.invokeVirtual((Class<SNode>) ((Class) Object.class), existingRef, "virtual_getVariable_2486081302460156153", new Object[]{}) == BehaviorReflection.invokeVirtual((Class<SNode>) ((Class) Object.class), currentRef, "virtual_getVariable_2486081302460156153", new Object[]{});
          }
        }))) {
          ListSequence.fromList(varRefs).addElement(SNodeOperations.copyNode(currentRef));
        }
      }
    });
    if (SNodeOperations.isInstanceOf(SLinkOperations.getTarget(node, "expression", true), "com.mbeddr.core.statements.structure.IVariableReference")) {
      ListSequence.fromList(varRefs).addElement(SNodeOperations.cast(SNodeOperations.copyNode(SLinkOperations.getTarget(node, "expression", true)), "com.mbeddr.core.statements.structure.IVariableReference"));
    }
    return varRefs;
  }
}
